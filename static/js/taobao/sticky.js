!function(a,b){function c(a){return a+="",a.indexOf("px")<0&&a.indexOf("%")<0&&"0"!==a&&(a+="px"),a}function d(a){return a+="",a.indexOf("deg")<0&"0"!==a&&(a+="deg"),a}function e(a,b){return b||(b="-"),a.replace(/[a-z][A-Z]/g,"$1"+b+"$2").toLowerCase()}function f(a){var b=/ms|s|m|h$/.exec(a)[0],c={ms:1,s:1e3,m:6e4,h:36e5};return parseFloat(a)*c[b]}var g=/^matrix3d\(\d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+), [-\d.]+, \d+\)/,h=/^matrix\(\d+, \d+, \d+, \d+, ([-\d.]+), ([-\d.]+)\)$/,i=/^(translate|rotate|scale)(X|Y|Z|3d)?|(matrix)(3d)?|(perspective)|(skew)(X|Y)?$/i,j=(/android/gi.test(navigator.appVersion),/iphone|ipad/gi.test(navigator.appVersion),"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix),k={translate:function(a,b,c,d,e,f,g){this.doTransition(a,{translate:[e,f]},{duration:b,timingFunction:c,delay:d,callback:g})},doTransition:function(a,b,g){function h(b){t||(a.removeEventListener("webkitTransitionEnd",h,!1),b&&b.srcElement!==a||(t=!0,setTimeout(g.callback,10)))}var k,l=[g.duration,g.timingFunction||"ease",g.delay||"0s"].join(" "),m="",n=[],o={};for(var p in b){var q=b[p];if(k=p.match(i)){q instanceof Array||(q=[q]);var r=k[1]||k[3]||k[5]||k[6],s=k[2]||k[4]||k[7]||"";"translate"===r&&""===s&&j&&(s="3d",q.push(0)),"translate"===r?q=q.map(c):("rotate"===r||"skew"===r)&&(q=q.map(d)),m+=r+s+"("+q.join(",")+")"}else n.push(e(p)+" "+l),o[p]=q;m&&n.push("-webkit-transform "+l)}var t=!1;g.callback&&a.addEventListener("webkitTransitionEnd",h,!1),setTimeout(h,1.2*f(g.duration)),setTimeout(function(){a.style.webkitTransition=n.join(", "),m.length&&(a.style.webkitTransform=m);for(var b in o)a.style[b]=o[b]},10)},genCubicBezier:function(a,b){return[[(a/3+(a+b)/3-a)/(b-a),(a*a/3+a*b*2/3-a*a)/(b*b-a*a)],[(b/3+(a+b)/3-a)/(b-a),(b*b/3+a*b*2/3-a*a)/(b*b-a*a)]]},makeTranslateString:function(a,b){return a=c(a),b=c(b),j?"translate3d("+a+", "+b+", 0)":"translate("+a+", "+b+")"},getTransformOffset:function(a){var b,c,d={x:0,y:0},e=getComputedStyle(a).webkitTransform;return"none"!==e&&(c=e.indexOf("matrix3d")>-1?g:h,(b=e.match(c))&&(d.x=parseInt(b[1])||0,d.y=parseInt(b[2])||0)),d}};b.module.Animation=k}(window,window.app||(window.app={module:{},plugin:{}})),function(a,b){function c(a,b){b||(b={}),this._wrapEl=a,this._cacheLength=Math.max(b.cacheLength,1),this._cacheIndex=0;for(var c="",d=0;d<this._cacheLength;d++)c+='<div class="inactive" index="'+d+'"></div>';this._wrapEl.innerHTML='<div class="wrap">'+c+'</div><div class="trans"><div></div></div>',this.contentEl=this._wrapEl.childNodes[0],this.transEl=this._wrapEl.childNodes[1],this.transShadeEl=this.transEl.childNodes[0],this.setClassName()}var d={setClassName:function(){this.getActive().className="active",this._cacheLength>2?(this.getPrevious().className="inactive prev",this.getNext().className="inactive next"):this._cacheLength>1&&(this.getPrevious().className="inactive")},getActive:function(){var a=this._cacheIndex;return this.contentEl.childNodes[a]},getNext:function(){var a=(this._cacheIndex+1)%this._cacheLength;return this.contentEl.childNodes[a]},getPrevious:function(){var a=(this._cacheIndex-1+this._cacheLength)%this._cacheLength;return this.contentEl.childNodes[a]},next:function(){this._cacheLength>2&&(this.getPrevious().className="inactive"),this._cacheIndex=(this._cacheIndex+1)%this._cacheLength},previous:function(){this._cacheLength>2&&(this.getNext().className="inactive"),this._cacheIndex=(this._cacheIndex-1+this._cacheLength)%this._cacheLength},html:function(a){this.getActive().innerHTML=a}};for(var e in d)c.prototype[e]=d[e];b.module.Content=c}(window,window.app||(window.app={module:{},plugin:{}})),function(a){function b(a,b){for(var c=a;c;){if(c.contains(b)||c==b)return c;c=c.parentNode}return null}function c(a,b,c){var d=i.createEvent("HTMLEvents");if(d.initEvent(b,!0,!0),"object"==typeof c)for(var e in c)d[e]=c[e];a.dispatchEvent(d)}function d(a,b,c,d,e,f,g,h){var i=Math.atan2(h-f,g-e)-Math.atan2(d-b,c-a),j=Math.sqrt((Math.pow(h-f,2)+Math.pow(g-e,2))/(Math.pow(d-b,2)+Math.pow(c-a,2))),k=[e-j*a*Math.cos(i)+j*b*Math.sin(i),f-j*b*Math.cos(i)-j*a*Math.sin(i)];return{rotate:i,scale:j,translate:k,matrix:[[j*Math.cos(i),-j*Math.sin(i),k[0]],[j*Math.sin(i),j*Math.cos(i),k[1]],[0,0,1]]}}function e(a){0===Object.keys(l).length&&(j.addEventListener("touchmove",f,!1),j.addEventListener("touchend",g,!1),j.addEventListener("touchcancel",h,!1));for(var d=0;d<a.changedTouches.length;d++){var e=a.changedTouches[d],i={};for(var m in e)i[m]=e[m];var n={startTouch:i,startTime:Date.now(),status:"tapping",element:a.srcElement,pressingHandler:setTimeout(function(b){return function(){"tapping"===n.status&&(n.status="pressing",c(b,"press",{touchEvent:a})),clearTimeout(n.pressingHandler),n.pressingHandler=null}}(a.srcElement),500)};l[e.identifier]=n}if(2==Object.keys(l).length){var o=[];for(var m in l)o.push(l[m].element);c(b(o[0],o[1]),"dualtouchstart",{touches:k.call(a.touches),touchEvent:a})}}function f(a){for(var e=0;e<a.changedTouches.length;e++){var f=a.changedTouches[e],g=l[f.identifier];if(!g)return;var h=f.clientX-g.startTouch.clientX,i=f.clientY-g.startTouch.clientY,j=Math.sqrt(Math.pow(h,2)+Math.pow(i,2));"tapping"===g.status&&j>10&&(g.status="panning",c(g.element,"panstart",{touch:f,touchEvent:a}),Math.abs(h)>Math.abs(i)?(c(g.element,"horizontalpanstart",{touch:f,touchEvent:a}),g.isVertical=!1):(c(g.element,"verticalpanstart",{touch:f,touchEvent:a}),g.isVertical=!0)),"panning"===g.status&&(g.panTime=Date.now(),c(g.element,"pan",{displacementX:h,displacementY:i,touch:f,touchEvent:a}),g.isVertical?c(g.element,"verticalpan",{displacementY:i,touch:f,touchEvent:a}):c(g.element,"horizontalpan",{displacementX:h,touch:f,touchEvent:a}))}if(2==Object.keys(l).length){for(var k,m=[],n=[],o=[],e=0;e<a.touches.length;e++){var f=a.touches[e],g=l[f.identifier];m.push([g.startTouch.clientX,g.startTouch.clientY]),n.push([f.clientX,f.clientY])}for(var p in l)o.push(l[p].element);k=d(m[0][0],m[0][1],m[1][0],m[1][1],n[0][0],n[0][1],n[1][0],n[1][1]),c(b(o[0],o[1]),"dualtouch",{transform:k,touches:a.touches,touchEvent:a})}}function g(a){if(2==Object.keys(l).length){var d=[];for(var e in l)d.push(l[e].element);c(b(d[0],d[1]),"dualtouchend",{touches:k.call(a.touches),touchEvent:a})}for(var i=0;i<a.changedTouches.length;i++){var n=a.changedTouches[i],o=n.identifier,p=l[o];if(p){if(p.pressingHandler&&(clearTimeout(p.pressingHandler),p.pressingHandler=null),"tapping"===p.status&&(p.timestamp=Date.now(),c(p.element,"tap",{touch:n,touchEvent:a}),m&&p.timestamp-m.timestamp<300&&c(p.element,"doubletap",{touch:n,touchEvent:a}),this.lastTap=p),"panning"===p.status){var q=Date.now()-p.startTime,r=(n.clientX-p.startTouch.clientX)/q,s=(n.clientY-p.startTouch.clientY)/q,t=n.clientX-p.startTouch.clientX,u=n.clientY-p.startTouch.clientY;c(p.element,"panend",{isflick:300>q,touch:n,touchEvent:a}),300>q&&(c(p.element,"flick",{duration:q,velocityX:r,velocityY:s,displacementX:t,displacementY:u,touch:n,touchEvent:a}),p.isVertical?c(p.element,"verticalflick",{duration:q,velocityY:s,displacementY:u,touch:n,touchEvent:a}):c(p.element,"horizontalflick",{duration:q,velocityX:r,displacementX:t,touch:n,touchEvent:a}))}"pressing"===p.status&&c(p.element,"pressend",{touch:n,touchEvent:a}),delete l[o]}}0===Object.keys(l).length&&(j.removeEventListener("touchmove",f,!1),j.removeEventListener("touchend",g,!1),j.removeEventListener("touchcancel",h,!1))}function h(a){if(2==Object.keys(l).length){var d=[];for(var e in l)d.push(l[e].element);c(b(d[0],d[1]),"dualtouchend",{touches:k.call(a.touches),touchEvent:a})}for(var i=0;i<a.changedTouches.length;i++){var m=a.changedTouches[i],n=m.identifier,o=l[n];o&&(o.pressingHandler&&(clearTimeout(o.pressingHandler),o.pressingHandler=null),"panning"===o.status&&c(o.element,"panend",{touch:m,touchEvent:a}),"pressing"===o.status&&c(o.element,"pressend",{touch:m,touchEvent:a}),delete l[n])}0===Object.keys(l).length&&(j.removeEventListener("touchmove",f,!1),j.removeEventListener("touchend",g,!1),j.removeEventListener("touchcancel",h,!1))}var i=a.document,j=i.documentElement,k=Array.prototype.slice,l={},m=null;j.addEventListener("touchstart",e,!1)}(window,window.app||(window.app={module:{},plugin:{}})),function(a,b){function c(){this._handlers={}}function d(a,b,c){e.isLogging&&console.log("[Message]",{scope:a,event:b,args:c})}function e(a){var b=this;this._scope=a,this._event=new c,this._cache={},this._handler=function(a){for(var c=a.type,d=a.args,e=b._cache[c].slice(),f=0;f<e.length;f+=2)e[f].apply(e[f+1],d)},h[a]=this}var f={addEventListener:function(a,b){var c,d=this._handlers;c=d[a]||(d[a]=[]),c.push(b)},removeEventListener:function(a,b){var c=this._handlers;c[a]&&(c[a]=c[a].filter(function(a){return a!=b}),c[a].length||delete c[a])},dispatchEvent:function(a){var b=this._handlers,c=a.type;b.hasOwnProperty(c)&&b[c].forEach(function(b){b(a)}),this["on"+c]&&this["on"+c](a)}};for(var g in f)c.prototype[g]=f[g];var h={},i=/\s+/,j={on:function(a,b,c){var d,e,f=this,g=f._cache,h=f._event;if(!b)return f;for(a=a.split(i);e=a.shift();)d=g[e]||(g[e]=[]),d.length||h.addEventListener(e,this._handler),d.push(b,c);return f},off:function(a,b,c){var d,e,f=this,g=f._cache,h=f._event;for(a=a?a.split(i):Object.keys(g);e=a.shift();){!(b||c)&&(g[e]=[]),d=g[e];for(var j=d.length-2;j>=0;j-=2)b&&d[j]!==b||c&&d[j+1]!==c||d.splice(j,2);d.length||(delete g[e],h.removeEventListener(e,this._handler))}return f},once:function(a,b,c){function d(){b.apply(this,arguments),e.off(a,d,c)}var e=this;return e.on(a,d,c)},after:function(a,b,c){function d(){for(var a in h)if(!h[a])return!1;return!0}function e(){for(var a in h)h[a]=!1}var f,g=this,h={};return b?(a=a.split(i),f=a.join("&&"),a.forEach(function(a){h[a]=!1,g.on(a,function(){h[a]=!0,d()&&(g.trigger(f),e())})}),void g.on(f,b,c)):g},trigger:function(a){var b,c,e=this,f=e._cache,g=e._event;for(a=a.split(i),b=Array.prototype.slice.call(arguments,1);c=a.shift();)d(this._scope,c,b),f[c]&&g.dispatchEvent({type:c,args:b});return e}};for(var g in j)e.prototype[g]=j[g];e.isLogging=!1,e.mixto=function(a,b){var c=e.get(b);a.prototype&&(a=a.prototype);for(var d in j)void function(b){a[d]=function(){b.apply(c,arguments)}}(j[d])},e.get=function(a){if("string"==typeof a)return h[a]||(h[a]=new e(a));if(a instanceof e)return a;throw new TypeError},b.module.Event=c,b.module.MessageScope=e}(window,window.app||(window.app={module:{},plugin:{}})),function(a,b){function c(a,b){null!=b.id&&a.setAttribute("data-id",b.id),null!=b["class"]&&(a.className=b["class"]),null!=b.text&&(a.innerHTML=b.text),null!=b.bg&&(a.style.background=b.bg),null!=b.icon&&(a.innerHTML='<img src="'+b.icon+'" border="0" width="100%" height="100%" />'),a.style.display=b.hide===!0?"none":"",b.onChange&&b.onChange.call(a,b),b.handler&&(a.handler&&a.removeEventListener("click",a.handler,!1),a.addEventListener("click",a.handler=b.handler,!1))}function d(a){this.wrapEl=a,this.wrapEl.appendChild(this.animWrapEl=e.createElement("ul")),this.animWrapEl.appendChild(this.titleWrapEl=e.createElement("li")),this.animWrapEl.appendChild(this.backWrapEl=e.createElement("li")),this.animWrapEl.appendChild(this.funcWrapEl=e.createElement("li"))}var e=a.document,f={setTitle:function(a){"string"==typeof a?this.titleWrapEl.innerHTML=a:a instanceof HTMLElement&&(this.titleWrapEl.innerHTML="",this.titleWrapEl.appendChild(a))},setButton:function(a){var b,d;"back"===a.type?(b=this.backWrapEl,d=b.querySelector("a")):"func"===a.type?(b=this.funcWrapEl,d=b.querySelector('a[data-id="'+a.id+'"]')):a.id&&(d=this.wrapEl.querySelector('a[data-id="'+a.id+'"]'),d&&(b=d.parentNode)),!d&&b&&(d=e.createElement("a"),d.className=a.type,b.appendChild(d)),c(d,a)},getButton:function(a){return this.wrapEl.querySelector('a[data-id="'+a+'"]')},removeButton:function(a){function b(a){a&&(a.handler&&a.removeEventListener("click",a.handler),a.parentNode.removeChild(a))}if(a){if("string"==typeof a)var c=this.getButton(a);else if(a instanceof HTMLElement)var c=a;b(c)}else for(var d=this.funcWrapEl.querySelectorAll("a"),e=0;e<d.length;e++)b(d[e])}};for(var g in f)d.prototype[g]=f[g];b.module.Navbar=d}(window,window.app||(window.app={module:{},plugin:{}})),function(a,b){function c(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function d(a,b){function d(){}d.prototype=b.prototype;var e=new d;c(e,a.prototype),e.constructor=a,a.prototype=e}function e(){}var f=(b.module.MessageScope,{}),g={ready:function(){},startup:function(){},teardown:function(){},show:function(){},hide:function(){}};for(var h in g)e.prototype[h]=g[h];e.fn={},e.define=function(a){function b(){e.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments)}return d(b,e),c(b.prototype,e.fn),c(b.prototype,a),f[a.name]=new b},e.get=function(a){return f[a]},b.module.Page=e}(window,window.app||(window.app={module:{},plugin:{}})),function(a,b){function c(){}var d=(a.document,{load:function(a,b){var d=c.engine;d.load&&"string"==typeof a?d.load(a,b):b&&b(a)},compile:function(a){var b=c.engine;return this.originTemplate=a,this.compiledTemplate=b.compile&&"string"==typeof a?b.compile(a):function(){return a},this.compiledTemplate},render:function(a){var b=c.engine,d=this.compiledTemplate;return this.content=b.render&&d&&"object"==typeof a?b.render(d,a):d?d(a):Object.prototype.toString.call(a),this.content}});for(var e in d)c.prototype[e]=d[e];c.engine={},b.module.Template=c}(window,window.app||(window.app={module:{},plugin:{}})),function(a,b){function c(a,b){b||(b={}),this._wrapEl=a,this.set(b)}var d=(a.document,{set:function(a){a||(a={}),a.html&&(this._wrapEl.innerHTML=a.html),a.el&&((this._wrapEl.innerHTML="")||this._wrapEl.appendChild(a.el)),a.height&&(this._wrapEl.style.height=a.height+"px")},show:function(a){a&&this.set(a),this._wrapEl.style.display=""},hide:function(){this._wrapEl.style.display="none"}});for(var e in d)c.prototype[e]=d[e];b.module.Toolbar=c}(window,window.app||(window.app={module:{},plugin:{}})),function(a,b){function c(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c])}function d(a,b){function d(){}d.prototype=b.prototype;var e=new d;c(e,a.prototype),e.constructor=a,a.prototype=e}function e(){var b=a.$;if("string"==typeof this.el){var c=this.el.split(/\s*\>\s*/),d=this.el=document.createElement("div");c.forEach(function(a){var b;if(b=a.match(/^(\w+)?(?:\#([^.]+))?(?:\.(.+))?$/i)){var c=document.createElement(b[1]||"div");b[2]&&c.setAttribute("id",b[2]),b[3]&&(c.className=b[3]),d.appendChild(c)}else d.innerHTML=a;d=d.childNodes[0]}),this.el=this.el.removeChild(this.el.childNodes[0])}b&&(this.$el=b(this.el))}var f=(a.document,{}),g={render:function(){},destory:function(){}};for(var h in g)e.prototype[h]=g[h];e.fn={},e.extend=function(a){function b(){g.apply(this,arguments),this.initialize&&this.initialize.apply(this,arguments)}var g=f[a.parent]||e;return d(b,g),c(b.prototype,g.fn),c(b.prototype,a),f[a.name]=b},e.get=function(a){return f[a]},b.module.View=e}(window,window.app||(window.app={module:{},plugin:{}})),function(a,b){function c(a,b,c,e){var f=(this.TYPE,d.getTransformOffset(a)),g={translate:{x:f.x,y:f.y}},h={translate:{x:f.x,y:f.y}};b=b.split(""),c(g,h,b[0],b[1]);for(var i in g)"translate"===i?(a.style.webkitTransition="",a.style.webkitTransform=d.makeTranslateString(g[i].x,g[i].y)):a.style[i]=g[i];h.translate=[h.translate.x,h.translate.y],a.style.webkitBackfaceVisibility="hidden",a.style.webkitTransformStyle="preserve-3d",d.doTransition(a,h,{duration:"0.4s",timingFunction:"ease",callback:function(){a.style.webkitBackfaceVisibility="",a.style.webkitTransformStyle="",a.style.webkitTransition="",e&&e()}})}var d=(a.document,b.module.Animation),e={L:"x",R:"x",T:"y",B:"y"},f={L:-1,R:1,T:-1,B:1},g={TYPE:{LEFT_IN:"LI",LEFT_OUT:"LO",RIGHT_IN:"RI",RIGHT_OUT:"RO",TOP_IN:"TI",TOP_OUT:"TO",BOTTOM_IN:"BI",BOTTOM_OUT:"BO"},move:function(a,b,c,e){var f=d.getTransformOffset(a);a.style.webkitBackfaceVisibility="hidden",a.style.webkitTransformStyle="preserve-3d",d.translate(a,"0.4s","ease","0s",f.x+b,f.y+c,function(){a.style.webkitBackfaceVisibility="",a.style.webkitTransformStyle="",a.style.webkitTransition="",e&&e()})},slide:function(a,b,d,g){c(a,b,function(a,b,c,g){var h=e[c],i=f[c];"I"===g?a.translate[h]+=i*d:b.translate[h]+=i*d},g)},"float":function(a,b,d,g){c(a,b,function(a,b,c,g){var h=e[c],i=f[c];"I"===g?(a.translate[h]+=i*d,a.opacity=0,b.opacity=1):(b.translate[h]+=i*d,a.opacity=1,b.opacity=0)},g)},fadeIn:function(a,b){c(a,"FI",function(a,b,c,d){"I"===d?(a.opacity=0,b.opacity=1):(a.opacity=1,b.opacity=0)},b)},fadeOut:function(a){c(a,"FO",function(a,b,c,d){"I"===d?(a.opacity=0,b.opacity=1):(a.opacity=1,b.opacity=0)},callback)},zoomIn:function(){},zoomOut:function(){}};b.module.Transition=g}(window,window.app||(window.app={module:{},plugin:{}})),function(a,b){function c(a){return 0-(a.bounceTop||0)}function d(a){var b=a.getBoundingClientRect(),d=a.parentNode.getBoundingClientRect(),e=c(a),f=0-b.height+d.height;return Math.min(f+(a.bounceBottom||0),e)}function e(a,b){return b>a.minScrollTop?b-a.minScrollTop:b<a.maxScrollTop?a.maxScrollTop-b:void 0}function f(a,b){return b>a.minScrollTop?b=a.minScrollTop:b<a.maxScrollTop&&(b=a.maxScrollTop),b}function g(a,b,c){var d=u.createEvent("HTMLEvents");d.initEvent(b,!0,!0);for(var e in c)d[e]=c[e];a.dispatchEvent(d)}function h(a){if(!stopBounce){for(var b=a.srcElement;!b.boundScrollEvent;)b=b.parentNode||b.offsetParent;if(r=b.boundScrollElement){var c=w.getTransformOffset(r);r.style.webkitBackfaceVisibility="hidden",r.style.webkitTransformStyle="preserve-3d",r.style.webkitTransition="",r.style.webkitTransform=w.makeTranslateString(c.x,c.y)}}}function i(a){return a.preventDefault(),!1}function j(){}function k(){!stopBounce&&r&&(r.transformOffset=w.getTransformOffset(r),r.minScrollTop=c(r),r.maxScrollTop=d(r),x=2.5,stopBounce=!1,y=!1,g(r,"scrollstart"))}function l(a){if(!stopBounce&&r){var b=r.transformOffset.y+a.displacementY;if(b>r.minScrollTop?(b=r.minScrollTop+(b-r.minScrollTop)/x,x*=1.003,x>4&&(x=4)):b<r.maxScrollTop&&(b=r.maxScrollTop-(r.maxScrollTop-b)/x,x*=1.003,x>4&&(x=4)),e(r,b)){if(b>r.minScrollTop)var c="pulldown",d=Math.abs(b-r.minScrollTop);else if(b<r.maxScrollTop)var c="pullup",d=Math.abs(r.maxScrollTop-b);r.bounceOffset=d,g(r,c)}r.style.webkitTransition="",r.style.webkitTransform=w.makeTranslateString(r.transformOffset.x,b)}}function m(){if(!stopBounce&&r){var a=w.getTransformOffset(r).y;e(r,a)?o():q()}}function n(a){if(!stopBounce&&r){var b=w.getTransformOffset(r).y,c=.008*(a/Math.abs(a));t=a/c,s=b+t*a/2,g(r,"bouncestart"),w.translate(r,t.toFixed(0)+"ms","cubic-bezier("+w.genCubicBezier(-t,0)+")","0s",r.transformOffset.x,s.toFixed(0),o)}}function o(){if(!stopBounce&&r){var a=w.getTransformOffset(r).y;a=f(r,a),w.translate(r,"0.4s","ease-in-out","0s",r.transformOffset.x,a,function(){g(r,"bounceend"),q()})}}function p(a){if(!stopBounce&&r){var b,c,d,e,f,g,h,i=w.getTransformOffset(r).y;y=!0,i>r.minScrollTop||i<r.maxScrollTop?n(b):(b=a.velocityY,b>1.5&&(b=1.5),-1.5>b&&(b=-1.5),c=.0015*(b/Math.abs(b)),d=b/c,e=i+d*b/2,e>r.minScrollTop?(g=r.minScrollTop-i,h=(b-Math.sqrt(-2*c*g+b*b))/c,f=b-c*h,w.translate(r,h.toFixed(0)+"ms","cubic-bezier("+w.genCubicBezier(-d,-d+h)+")","0s",r.transformOffset.x,r.minScrollTop,function(){n(f)})):e<r.maxScrollTop?(g=r.maxScrollTop-i,h=(b+Math.sqrt(-2*c*g+b*b))/c,f=b-c*h,w.translate(r,h.toFixed(0)+"ms","cubic-bezier("+w.genCubicBezier(-d,-d+h)+")","0s",r.transformOffset.x,r.maxScrollTop,function(){n(f)})):w.translate(r,d.toFixed(0)+"ms","cubic-bezier("+w.genCubicBezier(-d,0)+")","0s",r.transformOffset.x,e.toFixed(0),q))}}function q(){!stopBounce&&r&&(y=!1,setTimeout(function(){y||(r.style.webkitBackfaceVisibility="initial",r.style.webkitTransformStyle="flat",r.style.webkitTransition="",g(r,"scrollend"))},10))}var r,u=a.document,v=u.documentElement,w=b.module.Animation,x=2,y=!1;stopBounce=!1,prevented=!1;var z={enable:function(a,b){var c=a.parentNode||a.offsetParent;prevented||(prevented=!0,v.addEventListener("touchmove",i,!1)),c.boundScrollEvent||(c.boundScrollEvent=!0,c.addEventListener("touchstart",h,!1),c.addEventListener("touchend",j,!1),c.addEventListener("panstart",k,!1),c.addEventListener("pan",l,!1),c.addEventListener("panend",m,!1),c.addEventListener("flick",p,!1)),c.boundScrollElement=a,b?(a.bounceTop=b.bounceTop,a.bounceBottom=b.bounceBottom):(a.bounceTop=0,a.bounceBottom=0);var d=w.getTransformOffset(a).x,e=-a.bounceTop;a.style.webkitTransition="",a.style.webkitTransform=w.makeTranslateString(d,e)},disable:function(a){var b,c=a.parentNode||a.offsetParent;c.boundScrollElement===a&&(b=w.getTransformOffset(a),r=c.boundScrollElement=null,setTimeout(function(){a.style.webkitTransition="",a.style.webkitTransform=w.makeTranslateString(b.x,b.y)},50))},getScrollHeight:function(a){return a.getBoundingClientRect().height-(a.bounceTop||0)-(a.bounceBottom||0)},getScrollTop:function(a){var b=w.getTransformOffset(a);return-(b.y+(a.bounceTop||0))},refresh:function(a){a.style.height="auto",a.style.height=a.offsetHeight+"px",a.offset=w.getTransformOffset(a),a.minScrollTop=c(a),a.maxScrollTop=d(a),this.scrollTo(a,-a.offset.y-a.bounceTop)},offset:function(a,b){var c=a.getBoundingClientRect(),d=b.getBoundingClientRect(),e={top:d.top-((a.bounceTop||0)+c.top),left:d.left-c.left,right:c.right-d.right,width:d.width,height:d.height};return e.bottom=e.top+d.height,e},scrollTo:function(a,b){var c=w.getTransformOffset(a).x,b=-b-(a.bounceTop||0);b=f(a,b),a.style.webkitTransition="",a.style.webkitTransform=w.makeTranslateString(c,b)},scollToElement:function(a,b){var c=this.offset(a,b);this.scrollTo(a,c.top)},getViewHeight:function(a){return a.parentNode.getBoundingClientRect().height},getBoundaryOffset:function(a){var b=w.getTransformOffset(a).y;return e(a,b)},stopBounce:function(a){stopBounce=!0;var b=w.getTransformOffset(a),e=c(a),f=d(a),g=null;b.y>e+(a.bounceTop||0)?g=e+(a.bounceTop||0):b.y<f-(a.bounceBottom||0)&&(g=f-(a.bounceBottom||0)),null!=g&&w.translate(a,"0.4s","ease-in-out","0s",b.x,g)},resumeBounce:function(a){stopBounce=!1;var b,e=w.getTransformOffset(a),f=c(a),g=d(a);e.y>f?b=f:g>e&&(b=g),null!=b&&w.translate(a,"0.4s","ease-in-out","0s",e.x,b)}};b.module.Scroll=z}(window,window.app||(window.app={module:{},plugin:{}})),function(a,b){function c(a){var b=this,d=!0,g={};e.mixto(b,"model-"+f++),b.addProperty=function(e,f){Object.defineProperty(b,e,{get:function(){return g[e]||a[e]},set:function(f){g[e]&&(g[e].destory(),delete g[e]),null!=f&&(a[e]=f,"object"==typeof f&&(g[e]=new c(f),g[e].on("propertyChange",function(a){b.trigger("propertyChange",{target:a.target,value:a.value,name:a.name,path:e+"."+a.path})}))),!d&&b.trigger("propertyChange",{target:b,value:g[e]||a[e],name:e,path:e})}}),b[e]=f},b.update=function(a){if(a instanceof Array)for(var d=0;d<a.length;d++)a[d]instanceof c||this.addProperty(d,a[d]);else for(var e in a){if(b.hasOwnProperty(e))throw new Error('property conflict "'+e+'"');!a.hasOwnProperty(e)||a[e]instanceof c||this.addProperty(e,a[e])}},b.destory=function(){for(var a in g)g[a].destory();b.off()},b.on("propertyChange",function(a){b.trigger("change:"+a.path,a.value)}),b.update(a),d=!1}function d(a){var b=this;!a instanceof Array||(b.push=function(c){a.push(c),b.addProperty(a.length-1,c)},b.pop=function(){var c=a.pop();return b[a.length]=null,c},Object.defineProperty(b,"length",{get:function(){return a.length}}),c.call(b,a))}var e=b.module.MessageScope,f=0;b.module.Model=c,b.module.Collection=d}(window,window.app||(window.app={module:{},plugin:{}})),function(a,b){function c(){var a=this;a.move=null,a.transition=null,a.datas=null,a._states=[],a._stateIdx=0,a._stateLimit=100}function d(a){return a.replace(m,"(P<$1>[^\\/]*?)").replace(n,"(P<$1>.*?)")}function e(a){var b=a.match(o),c={};return b&&b.forEach(function(a,b){c[a.replace(o,"$1")]=b}),c}function f(a){if(!a)return{};var b=a.split("&"),c={};return b.forEach(function(a){if(a){var b=a.split("=");c[b[0]]=b[1]}}),c}function g(a){return a=a.replace(o,""),new RegExp("^("+a+")$")}function h(){return r.hash.slice(1)||""}function i(a,b){b?r.replace("#"+a):r.hash=a}function j(){var a=this;a._started=!1,a._routes={},a._stack=new c}var k={reset:function(){var a=this;a.move=null,a.transition=null,a.datas=null,a.type=null,a._states=[],a._stateIdx=0,a._stateLimit=100},pushState:function(a,b,d,e){var f=this,g=f._states,h=f._stateIdx,i=f._stateLimit,j=g.length,k=f.move,l=f.transition,m=f.datas,n=f.type,o=g[h-1],p=g[h+1],q={name:a,fragment:b,type:n,params:d||{},datas:m||{}};for(var r in e)q.datas[r]=e[r];return null==k&&(l=k=!m&&c.isEquals(o,q)?"backward":"forward"),"backward"===k?0===h&&j>0?g.unshift(q):h>0&&(h--,q=o):"forward"===k?h===i-1?(g.shift(),g.push(q),q.referer=location.href.replace(/#[^#]*/,"#"+g[h-1].fragment)):0===h&&0===j?(g.push(q),q.referer=document.referer||""):!m&&c.isEquals(p,q)?(h++,q=p):c.isEquals(g[h],q)?q=g[h]:(h++,g.splice(h),g.push(q),q.referer=location.href.replace(/#[^#]*/,"#"+g[h-1].fragment)):"replace"===k&&(q.referer=location.href.replace(/#[^#]*/,"#"+g[h].fragment),g[h]=q),q.move=k,q.transition=l,q.index=h,f.move=null,f.transition=null,f.datas=null,f._stateIdx=h,q},getState:function(){return this._states[this._stateIdx]},getIndex:function(){return this._stateIdx}};for(var l in k)c.prototype[l]=k[l];c.isEquals=function(a,b){return a&&b?a.name!==b.name||a.fragment!==b.fragment?!1:!0:!1};var m=/\:([a-z0-9_-][a-z0-9_-]*)/gi,n=/\*([a-z0-9_-][a-z0-9_-]*)/gi,o=/P\<([a-z0-9_-][a-z0-9_-]*?)\>/gi,p="?",q=a.history,r=a.location,s={getStack:function(){return this._stack},handleEvent:function(){var a,b,c,d=this,e=d._routes,f=!0;if(d._started){b=h();for(var g in e)if(a=e[g],a["default"])c=a;else if(a.routeReg.test(b.split(p)[0])&&(f=!1,a.callback(b),a.last))break;f&&(c?c.callback(b):this._stack.pushState("unmatched",b,{},{}))}},addRoute:function(a,b,c){function h(b,d,e){var f=k._stack.pushState(a,b,d,e);f.isDefault=!!c["default"],c.callback&&c.callback(f)}var i,j,k=this;1===arguments.length&&(c=arguments[0],a=null,b=null),c||(c={}),c["default"]?k._routes[a]={"default":!0,callback:function(a){var b=f(a.split(p)[1]||"");h(a,{},b)}}:a&&b&&(b=d(b),i=e(b),j=g(b),k._routes[a]={routeText:b,routeReg:j,callback:function(a){var b=a.split(p),c=b[0].match(j).slice(2),d=f(b[1]||""),e={};for(var g in i)e[g]=c[i[g]];h(a,e,d)},last:c.last})},removeRoute:function(a){this._routes[a]&&delete this._routes[a]},hasRoute:function(a){return!!this._routes[a]},start:function(){return this._started?!1:(this._started=!0,a.addEventListener("hashchange",this,!1),this.handleEvent(),!0)},stop:function(){return this._started?(this._routes={},this._stack.reset(),this._started=!1,a.removeEventListener("hashchange",this,!1),!0):!1},push:function(a,b){var c=this,d=c._stack,e=d.getState(),f=d.getIndex();if(args=[],a||(a=""),b||(b={}),d.move=b.replace?"replace":"forward",d.transition="forward",/^(https?\:)?\/\//i.test(a))location.href=a;else if(a){if(!e||e.fragment!==a||b.data){if(b.type||(b.type="GET"),b.data||(b.data={}),"GET"===b.type.toUpperCase())for(var g in b.data)args.push(g+"="+b.data[g]);"POST"===b.type.toUpperCase()&&(d.datas=b.data),"backward"===b.transition&&(d.transition="backward"),d.type=b.type.toUpperCase(),i(a+(args.length?p+args.join("&"):""),!!b.replace)}}else f<d._states.length-1&&q.forward()},pop:function(a){var b=this,c=b._stack,d=c.getIndex();0!==d&&(c.move="backward",c.transition="backward",a&&"forward"===a.transition&&(c.transition="forward"),q.back())},resolve:function(a,b){var c,d=this._routes[a],e="";return d&&(c=d.routeText,e=c.replace(/\(P<[a-z0-9_-][a-z0-9_-]*?>.*?\)/g,function(a){o.lastIndex=0;var c=o.exec(a)[1];return b[c]||"undefined"}).replace("\\/?","").replace("\\","")),e}};for(var l in s)j.prototype[l]=s[l];j.instance=new j,b.module.StateStack=c,b.module.Navigation=j}(window,window.app||(window.app={module:{},plugin:{}})),function(a,b){function c(a,b){return b||(b=l),b.querySelector(a)}function d(a,b){var c=l.createEvent("HTMLEvents");c.initEvent(b,!0,!0),a.dispatchEvent(c)}function e(){if(o)d(window,"scrollend");else{var a=window.scrollY;setTimeout(function(){window.scrollY===a&&d(window,"scrollend")},150)}}function f(a,c){if(a.plugins)for(var d in a.plugins){var e=b.plugin[d],f=a.plugins[d];f===!0&&(f=a.plugins[d]={}),e&&f&&e[c]&&e[c](a,f)}}function g(a,c,d){if(2===arguments.length&&(d=c,c=a,a=null),c.plugins)for(var e in c.plugins){var f=b.plugin[e],g=c.plugins[e];if(f&&g){if(g===!0&&(g=c.plugins[e]={}),a){a.plugins[e]||(a.plugins[e]={});for(var h in g)null==a.plugins[e][h]&&(a.plugins[e][h]=c.plugins[e][h]);g=a.plugins[e]}f[d]&&f[d](c,g)}}}function h(a,b,c){var d=a[b];if("string"==typeof d)G.on("template:loaded",function(a){d===a&&(G.off("template:loaded",arguments.callee),c&&c())});else if("object"==typeof d)for(var b in d)h(d,b,function(){var a=!0;for(var b in d)if("function"!=typeof d[b]){a=!1;break}a&&c&&c()});else c&&c()}function i(a,b){return a.compile(b),function(b){return a.render(b)}}function j(a,b){var c=a[b];if("string"==typeof c){var d;D[c]?a[b]=D[c]:c.match(/\.tpl$/g)?(d=new t,d.load(c,function(e){a[b]=D[c]=i(d,e),G.trigger("template:loaded",c)})):(d=new t,a[b]=D[c]=i(d,c))}else if("object"==typeof c)for(var b in c)j(c,b)}function k(){return s.getStack().getState()}var l=a.document,m=a.$,n=navigator.appVersion,o=/iphone|ipad/gi.test(n),p=b.module,q=p.MessageScope,r=p.Navigation,s=r.instance,t=p.Template,u=p.View,v=p.Page,w=p.Navbar,x=p.Toolbar,y=p.Content,z=p.Scroll,A=(p.Animation,p.Transition),B={},C={},D={},E={},F=b.config={viewport:null,templateEngine:null,resourceCombo:null,resourceBase:"./",enableMessageLog:!1,enableContent:!0,enableNavbar:!1,enableToolbar:!1,enableScroll:!1,enableTransition:!1,pushState:!1,basePath:"/"},G=q.get("hooks");G.on("app:start",function(){var a=b.config;w||(a.enableNavbar=!1),x||(a.enableToolbar=!1),z||(a.enableScroll=!1),A||(a.enableTransition=!1),q.isLogging=a.enableMessageLog,a.enableNavbar===!0&&(a.enableNavbar={}),a.enableToolbar===!0&&(a.enableToolbar={}),a.enableScroll===!0&&(a.enableScroll={}),a.enableTransition===!0&&(a.enableTransition={}),"number"==typeof a.enableContent?a.enableContent={cacheLength:a.enableContent}:a.enableContent instanceof HTMLElement?a.enableContent={wrapEl:a.enableContent}:"object"!=typeof a.enableContent&&(a.enableContent={})}),"onorientationchange"in a&&window.addEventListener("onorientationchange",function(){setTimeout(function(){G.trigger("orientaion:change")},10)},!1),window.addEventListener("resize",function(){setTimeout(function(){G.trigger("screen:resize")},10)}),G.on("view:extend",function(a){var b=a.prototype.render,c=a.prototype.destory;a.prototype.render=function(){var a=this,c=arguments;h(a,"template",function(){G.trigger("view:render",a,arguments),b.apply(a,c)})},a.prototype.destory=function(){G.trigger("view:destory",this,arguments),c.apply(this,arguments)}}),G.on("page:define",function(a){var b=a.ready,c=a.startup,d=a.teardown,e=a.show,f=a.hide,g=!1,h=!1;a.ready=function(c){g||(G.trigger("page:ready",c,a),b.call(a),g=!0)},a.startup=function(b){G.trigger("page:startup",b,a),c.call(a)},a.show=function(b){G.trigger("page:show",b,a),e.call(a,h),h=!0},a.hide=function(b){G.trigger("page:hide",b,a),f.call(a,h)},a.teardown=function(b){G.trigger("page:teardown",b,a),d.call(a),h=!1},a.html=function(a){this.el.innerHTML=a}}),G.on("page:define page:defineMeta",function(a){var b=a.name,c=a.route;s.hasRoute(b)||(c?"string"==typeof c&&(c={name:b,text:c}):c={name:b,"default":!0},s.addRoute(c.name,c.text,{"default":c["default"],callback:function(a){q.get("navigation").trigger(a.move,a)},last:!0}))}),G.on("app:start",function(){var a,b=F.enableNavbar,d=F.enableToolbar,f=F.enableContent,g=F.enableTransition,h=F.enableScroll;F.viewport||(F.viewport=c(".viewport")||l.body),f.wrapEl||(f.wrapEl=c(".content",F.viewport)||F.viewport),f.cacheLength||(f.cacheLength=f.wrapEl===F.viewport?1:5),a=f.instance=new y(f.wrapEl,{cacheLength:f.cacheLength}),b&&(F.viewport.className+=" enableNavbar",b.wrapEl||(b.wrapEl=c(".navbar",F.viewport)),b.instance=new w(b.wrapEl)),d&&(F.viewport.className+=" enableToolbar",d.wrapEl||(d.wrapEl=c(".toolbar",F.viewport)),d.instance=new x(d.wrapEl,d)),h?(F.viewport.className+=" enableScroll",h.wrapEl=a.getActive()):window.addEventListener("scroll",e,!1),g&&(F.viewport.className+=" enableTransition",g.wrapEl=a.contentEl)
}),G.on("app:start",function(){for(var a in b.plugin){var c=b.plugin[a];c.onAppStart&&c.onAppStart()}}),G.on("view:render",function(a){f(a,"onViewRender")}),G.on("view:destory",function(a){f(a,"onViewTeardown")}),G.on("page:define",function(a){g(a,"onPageDefine")}),G.on("page:startup",function(a,b){g(a,b,"onPageStartup")}),G.on("page:show",function(a,b){g(a,b,"onPageShow")}),G.on("page:hide",function(a,b){g(a,b,"onPageHide")}),G.on("page:teardown",function(a,b){g(a,b,"onPageTeardown")}),G.once("view:extend page:define",function(){t.engine=F.templateEngine||{}}),G.on("view:extend",function(a){a.prototype.template&&j(a.prototype,"template")}),G.on("page:define",function(a){a.template&&j(a,"template")}),G.on("app:start",function(){function a(){var a=n.pageMeta.title||o.title,c=n.pageMeta.buttons||o.buttons;if(c)for(var d=0;d<c.length;d++){var e=c[d],f=e.handler;e.id||(e.id="btn-"+Date.now()+"-"+parseInt(10*Math.random())),"string"==typeof f&&(f=o[f]),"back"===e.type&&(e.hide=e.autoHide!==!1&&n.index<1,f||(f=function(){b.navigation.pop()})),e.handler=function(a){return function(b){a&&a.call(o,b,n.index)}}(f)}else c=[{id:"back",type:"back",text:"back",hide:n.index<1?!0:!1,handler:function(){b.navigation.pop()}}];if(D||!r){b.navigation.resetNavbar(),b.navigation.setTitle(a);for(var d=0;d<c.length;d++)b.navigation.setButton(c[d])}else b.navigation.switchNavbar(a,n.transition,c)}function c(){if(t){var a=t.instance,c=n.pageMeta.toolbar||o.toolbar;t.wrapEl.innerHTML="","number"==typeof c&&(c={height:c}),c?(b.navigation.setToolbar(c),a.show()):a.hide()}}function d(){D||("backward"===n.move?w.previous():w.next())}function e(){var a=y?F.viewport.offsetHeight:window.innerHeight;s&&(a-=s.wrapEl.offsetHeight),t&&(a-=t.wrapEl.offsetHeight),y?u.wrapEl.style.height=a+"px":(u.wrapEl.style.minHeight=a+"px",u.instance.getActive().style.minHeight=a+"px")}function f(){!D&&y&&(z.disable(y.wrapEl),y.wrapEl=w.getActive(),z.enable(y.wrapEl,o.scroll))}function g(){if(D)G.trigger("navigation:switchend",n);else{var a=n.transition;if(x&&r){var b=x.wrapEl,c=w.transEl,d=w.transShadeEl,e=b.getBoundingClientRect().width,f=e*("backward"===a?1:-1),g=b.className+=" "+a;d.style["backward"===a?"right":"left"]=e+"px",c.style.display="block",A.move(d,f,0,function(){w.setClassName(),b.className=g.replace(" "+a,""),d.style.cssText="",c.style.cssText="",G.trigger("navigation:switchend",n)})}else w.setClassName(),G.trigger("navigation:switchend",n)}}function i(a){for(var c in b.plugin){var d=b.plugin[c];d&&(n.plugins[c]||(n.plugins[c]={}),d[a]&&d[a](n.plugins[c]))}}function j(){var a;(a=C[n.name])&&(a.css&&b.loadResource(a.css,"css"),a.js&&b.loadResource(a.js,"js",function(){o=v.get(n.name),o&&(o.ready(),k())}))}function k(){o.el=w.getActive(),m&&(o.$el=m(o.el)),a(),c(),f(),g(),h(o,"template",l)}function l(){var a=o.el.getAttribute("data-fragment"),b=B[a];E||D&&n.isDefault||(r&&r.hide(p),a===n.fragment||D||(b&&(b.page.teardown(b.state),delete B[a]),B[n.fragment]={state:n,page:o},o.el.innerHTML="",o.el.setAttribute("data-fragment",n.fragment),o.startup(n)),o.show(n),p=n,r=o),G.trigger("page:domready")}var n,o,p,r,s=F.enableNavbar,t=F.enableToolbar,u=F.enableContent,w=u.instance,x=F.enableTransition,y=F.enableScroll,D=!1,E=!1;q.get("navigation").on("forward backward replace",function(){n=arguments[0],n.pageMeta||(n.pageMeta={}),n.plugins||(n.plugins={}),o=v.get(n.name),p&&(D=p.name===n.name,E=p.fragment===n.fragment),G.trigger("navigation:switch",n),o?k():j()}),G.on("navigation:switch",function(){d(),i("onNavigationSwitch")}),G.on("navigation:switchend",function(){e(),i("onNavigationSwitchEnd")}),G.after("page:domready navigation:switchend",function(){i("onDomReady")}),G.on("orientaion:change screen:resize",function(){e()})}),b.start=function(a){for(var c in a)b.config[c]=a[c];G.trigger("app:start"),s.start()},b.setTemplate=function(a,b){"string"==typeof b?D[a]=i(new t,b):"function"==typeof b&&(D[a]=b)},b.extendView=function(a){var b=u.extend(a);return G.trigger("view:extend",b),b},b.getView=function(a){var b=u.get(a);if(b){var c=Object.create(b.prototype),d=Array.prototype.slice.call(arguments,1);return b.apply(c,d),c}},b.definePage=function(a){var b=v.define(a);return G.trigger("page:define",b),b},b.definePageMeta=function(a){a instanceof Array||(a=[a]),a.forEach(function(a){C[a.name]=a,G.trigger("page:defineMeta",a)})},b.getPage=function(a){return v.get(a)};var H=document.createElement("a");b.loadResource=function(a,c,d){function e(){return"resource-"+Date.now()+"-"+Object.keys(E).length}function f(a){return a.match(/^(https?\:)?\/\//)?a:b.config.resourceBase+a}function g(a,b){if(!a)return b();if(a=H.href=f(a),"string"==typeof E[a])return b();var d=E[a]=e();if("js"===c||a.match(/\.js$/)){var g=document.createElement("script"),h=!1;g.id=d,g.async=!0,g.onload=g.onreadystatechange=function(){h||(h=!0,b&&b(a))},g.src=a,l.body.appendChild(g)}else if("css"===c||a.match(/\.css$/)){var i=document.createElement("link");i.id=d,i.type="text/css",i.rel="stylesheet",i.href=a,l.body.appendChild(i),b()}}2===arguments.length&&"function"==typeof arguments[1]&&(d=arguments[1],c=null),"string"==typeof a&&(a=[a]);var h=[],i=F.resourceCombo;a.forEach(function(a){H.href=f(a),E[H.href]||(E[H.href]=!0,h.push(a))}),i&&(h=i(h),"string"==typeof h&&(h=[h])),g(h.shift(),function(){h.length?g(h.shift(),arguments.callee):d&&d()})},b.navigation={push:function(a,b){s.push(a,b)},replace:function(a,b){b||(b={}),b.replace=!0,s.push(a,b)},pop:function(){s.pop()},resolveFragment:function(a,b){return s.resolve(a,b)},getReferer:function(){return k().referer},getParameter:function(a){var b=k();return b.params[a]||b.datas[a]},getParameters:function(){var a=k(),b={};for(var c in a.params)b[c]=a.params[c];for(var c in a.datas)b[c]=a.datas[c];return b},setData:function(a,b){k().datas[a]=b},setTitle:function(a){var b=k();F.enableNavbar&&F.enableNavbar.instance.setTitle(a),b.pageMeta.title=a},setButton:function(a){if(a instanceof Array)for(var b=0;b<a.length;b++)this.setButton(a[b]);else{var c=k();if(F.enableNavbar&&F.enableNavbar.instance.setButton(a),c.pageMeta.buttons){for(var b=0;b<c.pageMeta.buttons.length;b++){var d=c.pageMeta.buttons[b];if("back"===d.type&&"back"===a.type||d.id===a.id){for(var e in a)d[e]=a[e];return}}c.pageMeta.buttons.push(a)}else c.pageMeta.buttons=[a]}},switchNavbar:function(a,b,c){if(F.enableNavbar){this.resetNavbar(),this.setTitle(a);for(var d=0;d<c.length;d++)this.setButton(c[d]);A.float(F.enableNavbar.instance.animWrapEl,"backward"===b?"LI":"RI",50)}},resetNavbar:function(){var a=k();F.enableNavbar&&F.enableNavbar.instance.removeButton(),a.pageMeta.buttons=[]},setToolbar:function(a){var b=k();F.enableToolbar&&F.enableToolbar.instance.set(a),b.pageMeta.toolbar=a}},b.scroll={getScrollHeight:function(){var a=F.enableScroll;return a?z.getScrollHeight(a.wrapEl):l.body.scrollHeight},getScrollTop:function(){var a=F.enableScroll;return a?z.getScrollTop(a.wrapEl):l.body.scrollTop},refresh:function(){var a=F.enableScroll;a&&z.refresh(a.wrapEl)},offset:function(a){var b=F.enableScroll;return b?z.offset(b.wrapEl,a):z.offset(l.body,a)},scrollTo:function(a){var b=F.enableScroll;b?z.scrollTo(b.wrapEl,a):l.body.scrollTop=a},scrollToElement:function(a){var b=F.enableScroll;b?z.scrollToElement(b.wrapEl,a):a.scrollIntoView()},getViewHeight:function(){var a=F.enableScroll;return a?z.getViewHeight(a.wrapEl):window.innerHeight},getBoundaryOffset:function(){var a=F.enableScroll;return a?z.getBoundaryOffset(a.wrapEl):0},stopBounce:function(){var a=F.enableScroll;a&&z.stopBounce(a.wrapEl)},resumeBounce:function(){var a=F.enableScroll;a&&z.resumeBounce(a.wrapEl)},addEventListener:function(a,b,c){var d=F.enableScroll,e=(F.enableContent.instance,d?d.wrapEl:window);e.addEventListener(a,b,c)},removeEventListener:function(a,b){var c=F.enableScroll,d=(F.enableContent.instance,c?c.wrapEl:window);d.removeEventListener(a,b)},getElement:function(){var a=F.enableScroll;return a?a.wrapEl:l.body}}}(window,window.app||(window.app={module:{},plugin:{}}));!function(a){function b(a){var b=document.cookie.indexOf(";",a);return-1===b&&(b=document.cookie.length),window.unescape(decodeURIComponent(document.cookie.substring(a,b)))}a.storage||(a.storage={}),a.storage.cookie={isCookieEnable:function(){if(!window.navigator.cookieEnabled)return!1;var a="_s_cookie_",b=this.getCookie(a);return this.setCookie(a,"1"),"1"===b?(this.delCookie(a),!0):!1},getCookie:function(a){for(var c,d=a+"=",e=d.length,f=document.cookie.length,g=0;f>g;){if(c=g+e,document.cookie.substring(g,c)===d)return b(c);if(g=document.cookie.indexOf(" ",g)+1,0===g)break}return null},setCookie:function(a,b){var c=window.location.host,d=c.indexOf("."),e=c.substring(0,d),f=arguments.length>2?arguments[2]:null,g=new Date;"waptest"!==e&&"wapa"!==e&&"m"!==e&&(c.indexOf("taobao")>-1||c.indexOf("tmall")>-1)&&(c=c.substr(d+1)),null==f?document.cookie=a+"="+window.escape(b)+";path=/;domain="+c:(g.setTime(g.getTime()+1e3*f),document.cookie=a+"="+window.escape(b)+";path=/;domain="+c+";expires="+g.toGMTString())},delCookie:function(a){var b=new Date,c=this.getCookie(a);b.setTime(b.getTime()-1),document.cookie=a+"="+c+"; expires="+b.toGMTString()}}}(window.lib||(window.lib={})),function(a){a.h5init||(a.h5init={}),a.h5init={detectAndSetCookie:function(){var a="supportWebp";if(null==window.lib.storage.cookie.getCookie(a)){if(window.navigator.userAgent.indexOf("Chrome")>-1)return window.lib.storage.cookie.setCookie(a,!1,864e3),void 0;var b=new Image;b.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",b.onload=function(){2===b.height?window.lib.storage.cookie.setCookie(a,!0,1728e3):window.lib.storage.cookie.setCookie(a,!1,432e3)},b.onerror=function(){window.lib.storage.cookie.setCookie(a,!1,8640)}}},apluslog:function(){!function(a){var b=a.createElement("script");b.type="text/javascript",b.async=!0,b.id="tb-beacon-aplus",b.setAttribute("exparams",""),b.src="https:"==a.location.protocol?"https://s.tbcdn.cn/s/aplus_wap.js":"http://a.tbcdn.cn/s/aplus_wap.js",a.getElementsByTagName("head")[0].appendChild(b)}(document)}}}(window.lib||(window.lib={}));!function(a,b){function c(){var a={},b=new m(function(b,c){a.resolve=b,a.reject=c});return a.promise=b,a}function d(a,b){for(var c in b)void 0===a[c]&&(a[c]=b[c]);return a}function e(a){var b=document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]||document.firstElementChild||document;b.appendChild(a)}function f(a){var b=[];for(var c in a)a[c]&&b.push(c+"="+encodeURIComponent(a[c]));return b.join("&")}function g(a){function b(a,b){return a<<b|a>>>32-b}function c(a,b){var c,d,e,f,g;return e=2147483648&a,f=2147483648&b,c=1073741824&a,d=1073741824&b,g=(1073741823&a)+(1073741823&b),c&d?2147483648^g^e^f:c|d?1073741824&g?3221225472^g^e^f:1073741824^g^e^f:g^e^f}function d(a,b,c){return a&b|~a&c}function e(a,b,c){return a&c|b&~c}function f(a,b,c){return a^b^c}function g(a,b,c){return b^(a|~c)}function h(a,e,f,g,h,i,j){return a=c(a,c(c(d(e,f,g),h),j)),c(b(a,i),e)}function i(a,d,f,g,h,i,j){return a=c(a,c(c(e(d,f,g),h),j)),c(b(a,i),d)}function j(a,d,e,g,h,i,j){return a=c(a,c(c(f(d,e,g),h),j)),c(b(a,i),d)}function k(a,d,e,f,h,i,j){return a=c(a,c(c(g(d,e,f),h),j)),c(b(a,i),d)}function l(a){for(var b,c=a.length,d=c+8,e=(d-d%64)/64,f=16*(e+1),g=new Array(f-1),h=0,i=0;c>i;)b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|a.charCodeAt(i)<<h,i++;return b=(i-i%4)/4,h=i%4*8,g[b]=g[b]|128<<h,g[f-2]=c<<3,g[f-1]=c>>>29,g}function m(a){var b,c,d="",e="";for(c=0;3>=c;c++)b=a>>>8*c&255,e="0"+b.toString(16),d+=e.substr(e.length-2,2);return d}function n(a){a=a.replace(/\r\n/g,"\n");for(var b="",c=0;c<a.length;c++){var d=a.charCodeAt(c);128>d?b+=String.fromCharCode(d):d>127&&2048>d?(b+=String.fromCharCode(d>>6|192),b+=String.fromCharCode(63&d|128)):(b+=String.fromCharCode(d>>12|224),b+=String.fromCharCode(d>>6&63|128),b+=String.fromCharCode(63&d|128))}return b}var o,p,q,r,s,t,u,v,w,x=[],y=7,z=12,A=17,B=22,C=5,D=9,E=14,F=20,G=4,H=11,I=16,J=23,K=6,L=10,M=15,N=21;for(a=n(a),x=l(a),t=1732584193,u=4023233417,v=2562383102,w=271733878,o=0;o<x.length;o+=16)p=t,q=u,r=v,s=w,t=h(t,u,v,w,x[o+0],y,3614090360),w=h(w,t,u,v,x[o+1],z,3905402710),v=h(v,w,t,u,x[o+2],A,606105819),u=h(u,v,w,t,x[o+3],B,3250441966),t=h(t,u,v,w,x[o+4],y,4118548399),w=h(w,t,u,v,x[o+5],z,1200080426),v=h(v,w,t,u,x[o+6],A,2821735955),u=h(u,v,w,t,x[o+7],B,4249261313),t=h(t,u,v,w,x[o+8],y,1770035416),w=h(w,t,u,v,x[o+9],z,2336552879),v=h(v,w,t,u,x[o+10],A,4294925233),u=h(u,v,w,t,x[o+11],B,2304563134),t=h(t,u,v,w,x[o+12],y,1804603682),w=h(w,t,u,v,x[o+13],z,4254626195),v=h(v,w,t,u,x[o+14],A,2792965006),u=h(u,v,w,t,x[o+15],B,1236535329),t=i(t,u,v,w,x[o+1],C,4129170786),w=i(w,t,u,v,x[o+6],D,3225465664),v=i(v,w,t,u,x[o+11],E,643717713),u=i(u,v,w,t,x[o+0],F,3921069994),t=i(t,u,v,w,x[o+5],C,3593408605),w=i(w,t,u,v,x[o+10],D,38016083),v=i(v,w,t,u,x[o+15],E,3634488961),u=i(u,v,w,t,x[o+4],F,3889429448),t=i(t,u,v,w,x[o+9],C,568446438),w=i(w,t,u,v,x[o+14],D,3275163606),v=i(v,w,t,u,x[o+3],E,4107603335),u=i(u,v,w,t,x[o+8],F,1163531501),t=i(t,u,v,w,x[o+13],C,2850285829),w=i(w,t,u,v,x[o+2],D,4243563512),v=i(v,w,t,u,x[o+7],E,1735328473),u=i(u,v,w,t,x[o+12],F,2368359562),t=j(t,u,v,w,x[o+5],G,4294588738),w=j(w,t,u,v,x[o+8],H,2272392833),v=j(v,w,t,u,x[o+11],I,1839030562),u=j(u,v,w,t,x[o+14],J,4259657740),t=j(t,u,v,w,x[o+1],G,2763975236),w=j(w,t,u,v,x[o+4],H,1272893353),v=j(v,w,t,u,x[o+7],I,4139469664),u=j(u,v,w,t,x[o+10],J,3200236656),t=j(t,u,v,w,x[o+13],G,681279174),w=j(w,t,u,v,x[o+0],H,3936430074),v=j(v,w,t,u,x[o+3],I,3572445317),u=j(u,v,w,t,x[o+6],J,76029189),t=j(t,u,v,w,x[o+9],G,3654602809),w=j(w,t,u,v,x[o+12],H,3873151461),v=j(v,w,t,u,x[o+15],I,530742520),u=j(u,v,w,t,x[o+2],J,3299628645),t=k(t,u,v,w,x[o+0],K,4096336452),w=k(w,t,u,v,x[o+7],L,1126891415),v=k(v,w,t,u,x[o+14],M,2878612391),u=k(u,v,w,t,x[o+5],N,4237533241),t=k(t,u,v,w,x[o+12],K,1700485571),w=k(w,t,u,v,x[o+3],L,2399980690),v=k(v,w,t,u,x[o+10],M,4293915773),u=k(u,v,w,t,x[o+1],N,2240044497),t=k(t,u,v,w,x[o+8],K,1873313359),w=k(w,t,u,v,x[o+15],L,4264355552),v=k(v,w,t,u,x[o+6],M,2734768916),u=k(u,v,w,t,x[o+13],N,1309151649),t=k(t,u,v,w,x[o+4],K,4149444226),w=k(w,t,u,v,x[o+11],L,3174756917),v=k(v,w,t,u,x[o+2],M,718787259),u=k(u,v,w,t,x[o+9],N,3951481745),t=c(t,p),u=c(u,q),v=c(v,r),w=c(w,s);var O=m(t)+m(u)+m(v)+m(w);return O.toLowerCase()}function h(a){var b=new RegExp("(?:^|;\\s*)"+a+"\\=([^;]+)(?:;\\s*|$)").exec(document.cookie);return b?b[1]:void 0}function i(a,b,c){var d=new Date;d.setTime(d.getTime()-864e5);var e="/";doc.cookie=a+"=;path="+e+";domain=."+b+";expires="+d.toGMTString(),doc.cookie=a+"=;path="+e+";domain=."+c+"."+b+";expires="+d.toGMTString()}function j(){var b=a.location.hostname,c=["taobao.net","taobao.com","tmall.com","tmall.hk","etao.com","alibaba.com","alibaba-inc.com","alipay.com","aliyun.com","tdd.la"],d=new RegExp("([^.]*?)\\.?((?:"+c.join(")|(?:").replace(/\./g,"\\.")+"))","i"),e=b.match(d)||[],f=e[2]||"taobao.com",g=e[1]||"m";"taobao.net"!==f||"x"!==g&&"waptest"!==g&&"daily"!==g?"taobao.net"===f&&"demo"===g?g="demo":"taobao.com"===f&&"tms"===g?g="m":"tmall.com"===f&&"www"===g?g="m":"tdd.la"===f&&"m"===g&&(g=""):g="waptest";var h="etao.com"===f?"apie":"api";q.mainDomain=f,q.subDomain=g,q.prefix=h}function k(){var b=a.navigator.userAgent,c=b.match(/WindVane[\/\s]([\d\.\_]+)/);c&&(q.WindVaneVersion=c[1]);var d=b.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i);d&&(q.AliAppName=d[1],q.AliAppVersion=d[2])}function l(a){this.id=++t,this.params=d(a||{},{v:"*",data:{},type:"get",dataType:"jsonp"}),this.params.type=this.params.type.toLowerCase(),"object"==typeof this.params.data&&(this.params.data=JSON.stringify(this.params.data)),this.middlewares=r.slice(0)}var m=a.Promise,n=m.resolve(),o=a.localStorage;if(o)try{o.setItem("@private","false")}catch(p){o=!1}var q={useAlipayJSBridge:!1},r=[],s={ERROR:-1,SUCCESS:0,TOKEN_EXPIRED:1,SESSION_EXPIRED:2};j(),k();var t=0;l.prototype.use=function(a){if(!a)throw new Error("middleware is undefined");return this.middlewares.push(a),this},l.prototype.__processRequestMethod=function(a){var b=this.params,c=this.options;"get"===b.type&&"jsonp"===b.dataType?c.getJSONP=!0:"get"===b.type&&"json"===b.dataType?c.getJSON=!0:"post"===b.type&&(c.postJSON=!0),a()},l.prototype.__processRequestType=function(a){var c=this,d=this.options;if(q.H5Request===!0&&(d.H5Request=!0),q.WindVaneRequest===!0&&(d.WindVaneRequest=!0),d.H5Request===!1&&d.WindVaneRequest===!0){if(!b.windvane||parseFloat(d.WindVaneVersion)<5.4)throw new Error("WINDVANE_NOT_FOUND::缺少WindVane环境")}else d.H5Request===!0?d.WindVaneRequest=!1:"undefined"==typeof d.WindVaneRequest&&"undefined"==typeof d.H5Request&&(b.windvane&&parseFloat(d.WindVaneVersion)>=5.4?d.WindVaneRequest=!0:d.H5Request=!0);a().then(function(){var a=d.retJson.ret;return a instanceof Array&&(a=a.join(",")),d.WindVaneRequest===!0&&(!a||a.indexOf("HY_FAILED")>-1||a.indexOf("HY_NO_HANDLER")>-1||a.indexOf("HY_CLOSED")>-1||a.indexOf("HY_EXCEPTION")>-1||a.indexOf("HY_NO_PERMISSION")>-1)?(q.H5Request=!0,c.__sequence([c.__processRequestType,c.__processToken,c.__processRequestUrl,c.__processUnitPrefix,c.middlewares,c.__processRequest])):void 0})};var u="_m_h5_tk",v="_m_h5_tk_enc";l.prototype.__getTokenFromAlipay=function(){var b=c(),d=this.options,e=(a.navigator.userAgent,!!location.protocol.match(/^https?\:$/)),f="AP"===d.AliAppName&&parseFloat(d.AliAppVersion)>=8.2;return d.useAlipayJSBridge===!0&&!e&&f&&a.AlipayJSBridge&&a.AlipayJSBridge.call?a.AlipayJSBridge.call("getMtopToken",function(a){a&&a.token&&(d.token=a.token),b.resolve()},function(){b.resolve()}):b.resolve(),b.promise},l.prototype.__getTokenFromCookie=function(){var a=this.options;return a.token=a.token||h(u),a.token&&(a.token=a.token.split("_")[0]),m.resolve()},l.prototype.__processToken=function(a){{var b=this,c=this.options;this.params}return c.token&&delete c.token,c.WindVaneRequest!==!0?n.then(function(){return b.__getTokenFromAlipay()}).then(function(){return b.__getTokenFromCookie()}).then(a).then(function(){var a=c.retJson,d=a.ret;if(d instanceof Array&&(d=d.join(",")),d.indexOf("TOKEN_EMPTY")>-1||d.indexOf("TOKEN_EXOIRED")>-1){if(c.maxRetryTimes=c.maxRetryTimes||5,c.failTimes=c.failTimes||0,c.H5Request&&++c.failTimes<c.maxRetryTimes)return b.__sequence([b.__processToken,b.__processRequestUrl,b.__processUnitPrefix,b.middlewares,b.__processRequest]);maxRetryTimes>0&&(i(u,c.mainDomain,c.subDomain),i(v,c.mainDomain,c.subDomain)),a.retType=s.TOKEN_EXPIRED}}):void a()},l.prototype.__processRequestUrl=function(a){var b=this.params,c=this.options;if(c.H5Request===!0){var d="//"+(c.prefix?c.prefix+".":"")+(c.subDomain?c.subDomain+".":"")+c.mainDomain+"/h5/"+b.api.toLowerCase()+"/"+b.v.toLowerCase()+"/",e=(new Date).getTime(),f="waptest"===c.subDomain?"4272":"12574478",h=g(c.token+"&"+e+"&"+f+"&"+b.data),i={appKey:f,t:e,sign:h},j={data:b.data,ua:b.ua};Object.keys(b).forEach(function(a){"undefined"==typeof i[a]&&"undefined"==typeof j[a]&&(i[a]=b[a])}),c.getJSONP?i.type="jsonp":(c.getJSON||c.postJSON)&&(i.type="originaljson"),c.querystring=i,c.postdata=j,c.path=d}a()},l.prototype.__processUnitPrefix=function(b){var c=this.params,d=this.options;if(o&&d.H5Request===!0){var f=c.api,g=!1,i=h("_m_user_unitinfo_"),j=o.getItem("unitinfo");i&&i.split("|")[0].indexOf("center")<0&&j&&j.indexOf(f.toLowerCase())>=0&&(g=i.split("|")[1]),g&&d.path&&(d.path=d.path.replace(/^\/\//,"//"+g+".")),b().then(function(){if(o){var b=h("_m_unitapi_v_"),c=o.getItem("unitinfo");if(b){var f=c?JSON.parse(c):{};if(!c||b!==f.version){var g=!1,i="//h5."+d.subDomain+".taobao.com/js/mtop/unit/"+b+"/unitApi.js",j=document.createElement("script");j.src=i;var k=function(){g||(g=!0,j.onload=j.onerror=null,j.parentNode&&j.parentNode.removeChild(j))};j.onerror=function(){k()},a.jsonp_unitapi||(a.jsonp_unitapi=function(a){k(),o.setItem("unitinfo",JSON.stringify(a))}),e(j)}}}})}else b()};var w=0;l.prototype.__requestJSONP=function(a){function b(a){if(k&&clearTimeout(k),l.parentNode&&l.parentNode.removeChild(l),"TIMEOUT"===a)window[j]=function(){window[j]=undef;try{delete window[j]}catch(a){}};else{window[j]=void 0;try{delete window[j]}catch(b){}}}var d=c(),g=this.params,h=this.options,i=g.timeout||2e4,j="mtopjsonp"+ ++w,k=setTimeout(function(){b("TIMEOUT"),a("TIMEOUT::接口超时")},i);h.querystring.callback=j;var l=document.createElement("script");return l.src=h.path+"?"+f(h.querystring)+"&"+f(h.postdata),l.sync=!0,l.onerror=function(){b("ABORT"),a("ABORT::接口异常退出")},window[j]=function(){h.results=Array.prototype.slice.call(arguments),b(),d.resolve()},e(l),d.promise},l.prototype.__requestJSON=function(b){function d(a){k&&clearTimeout(k),"TIMEOUT"===a&&i.abort()}var e=c(),g=this.params,h=this.options,i=new a.XMLHttpRequest,j=g.timeout||2e4,k=setTimeout(function(){d("TIMEOUT"),b("TIMEOUT::接口超时")},j);i.onreadystatechange=function(){if(4==i.readyState){var a,c,f=i.status;if(f>=200&&300>f||304==f){d(),a=i.responseText,c=i.getAllResponseHeaders()||"";try{a=/^\s*$/.test(a)?{}:JSON.parse(a),a.responseHeaders=c,h.results=[a],e.resolve()}catch(g){b("PARSE_JSON_ERROR::解析JSON失败")}}else d("ABORT"),b("ABORT::接口异常退出")}};var l,m,n=h.path+"?"+f(h.querystring);if(h.getJSON?(l="GET",n+="&"+f(h.postdata)):h.postJSON&&(l="POST",m=f(h.postdata)),i.open(l,n,!0),i.withCredentials=!0,i.setRequestHeader("Accept","application/json"),i.setRequestHeader("Content-type","application/x-www-form-urlencoded"),g.headers)for(var o in g.headers)i.setRequestHeader(o,g.headers[o]);return i.send(m),e.promise},l.prototype.__requestWindVane=function(a){function d(a){j.results=[a],h.resolve()}var e,f,g,h=c(),i=this.params,j=this.options,k=i.data,l=i.api,m=i.v,n=j.postJSON?1:0,o=j.getJSON||j.postJSON?"orginaljson":"",p="https"===location.protocol?1:0,q=i.isSec||0,r=i.sessionOption||"AutoLoginOnly";if("undefined"==typeof i.ecode)throw new Error("UNEXCEPT_PARAM_ECODE::缺少ecode参数");return e=parseInt(i.ecode),g="undefined"!=typeof i.timer?parseInt(i.timer):"undefined"!=typeof i.timeout?parseInt(i.timeout):2e4,f=2*g,b.windvane.call("MtopWVPlugin","send",{api:l,v:m,post:String(n),type:o,isHttps:String(p),ecode:String(e),isSec:String(q),param:JSON.parse(k),timer:g,sessionOption:r},d,d,f),h.promise},l.prototype.__processRequest=function(a,b){var c=this;return n.then(function(){var a=c.options;if(a.H5Request&&a.getJSONP)return c.__requestJSONP(b);if(a.H5Request&&(a.getJSON||a.postJSON))return c.__requestJSON(b);if(a.WindVaneRequest)return c.__requestWindVane(b);throw new Error("UNEXCEPT_REQUEST::错误的请求类型")}).then(a).then(function(){var a=c.options,b=(c.params,a.results[0]),d=b&&b.ret||[];b.ret=d,d instanceof Array&&(d=d.join(",")),d.indexOf("SUCCESS")>-1?b.retType=s.SUCCESS:b.retType=s.ERROR,a.retJson=b})},l.prototype.__sequence=function(a){function b(a){if(a instanceof Array)a.forEach(b);else{var g,h=c(),i=c();e.push(function(){return h=c(),g=a.call(d,function(a){return h.resolve(a),i.promise},function(a){return h.reject(a),i.promise}),g&&(g=g["catch"](function(a){h.reject(a)})),h.promise}),f.push(function(a){return i.resolve(a),g})}}var d=this,e=[],f=[];a.forEach(b);for(var g,h=n;g=e.shift();)h=h.then(g);for(;g=f.pop();)h=h.then(g);return h};var x=function(a){a()},y=function(a){a()};l.prototype.request=function(a){var b=this;this.options=d(a||{},q);var c=m.resolve([x,y]).then(function(a){var c=a[0],d=a[1];return b.__sequence([c,b.__processRequestMethod,b.__processRequestType,b.__processToken,b.__processRequestUrl,b.__processUnitPrefix,b.middlewares,b.__processRequest,d])}).then(function(){var a=b.options.retJson;return a.retType!==s.SUCCESS?m.reject(a):(b.options.successCallback&&b.options.successCallback(a),m.resolve(a))})["catch"](function(a){var c;return a instanceof Error?(console.error(a.stack),c={ret:[a.message],stack:[a.stack],retJson:s.ERROR}):c="string"==typeof a?{ret:[a],retJson:s.ERROR}:void 0!==a?a:b.options.retJson,b.options.failureCallback&&b.options.failureCallback(c),m.reject(c)});return x=function(a){c.then(a)["catch"](a)},c},b.mtop=function(a){return new l(a)},b.mtop.request=function(a,b,c){var d={H5Request:a.H5Request,WindVaneRequest:a.WindVaneRequest,LoginRequest:a.LoginRequest,AntiCreep:a.AntiCreep,AntiFlood:a.AntiFlood,successCallback:b,failureCallback:c||b};return new l(a).request(d)},b.mtop.H5Request=function(a,b,c){var d={H5Request:!0,successCallback:b,failureCallback:c||b};return new l(a).request(d)},b.mtop.middlewares=r,b.mtop.config=q,b.mtop.RESPONSE_TYPE=s,b.mtop.CLASS=l}(window,window.lib||(window.lib={})),function(a,b){function c(a){return a.preventDefault(),!1}function d(b,d){var e=this,f=a.dpr||1,g=document.createElement("div"),h=document.documentElement.getBoundingClientRect(),i=Math.max(h.width,window.innerWidth)/f,j=Math.max(h.height,window.innerHeight)/f;g.style.cssText=["-webkit-transform:scale("+f+") translateZ(0)","-ms-transform:scale("+f+") translateZ(0)","transform:scale("+f+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+i+"px","height:"+j+"px","z-index:999999","position:absolute","left:0","top:0px","background:#FFF","display:none"].join(";");var k=document.createElement("div");k.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),k.innerText=b;var l=document.createElement("a");l.style.cssText=["display:block","position:absolute","right:0","top:0","height:52px","line-height:52px","padding:0 20px","color:#999"].join(";"),l.innerText="关闭";var m=document.createElement("iframe");m.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),k.appendChild(l),g.appendChild(k),g.appendChild(m),document.body.appendChild(g),m.src=d,l.addEventListener("click",function(){e.hide();var a=document.createEvent("HTMLEvents");a.initEvent("close",!1,!1),g.dispatchEvent(a)},!1),this.addEventListener=function(){g.addEventListener.apply(g,arguments)},this.removeEventListener=function(){g.removeEventListener.apply(g,arguments)},this.show=function(){document.addEventListener("touchmove",c,!1),g.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",c),window.scrollTo(0,-h.top),g.parentNode&&g.parentNode.removeChild(g)}}function e(a){{var c=this,d=this.options;this.params}return a().then(function(){var a=d.retJson,e=a.ret;if(e instanceof Array&&(e=e.join(",")),(e.indexOf("SESSION_EXPIRED")>-1||e.indexOf("SID_INVALID")>-1||e.indexOf("AUTH_REJECT")>-1||e.indexOf("NEED_LOGIN")>-1)&&(a.retType=k.SESSION_EXPIRED,!d.WindVaneRequest&&(j.LoginRequest===!0||d.LoginRequest===!0))){if(!b.login)throw new Error("LOGIN_NOT_FOUND::缺少lib.login");return b.login.goLoginAsync().then(function(a){return c.__sequence([c.__processToken,c.__processRequestUrl,c.__processUnitPrefix,c.middlewares,c.__processRequest])})["catch"](function(a){throw new Error("CANCEL"===a?"LOGIN_CANCEL::用户取消登录":"LOGIN_FAILURE::用户登录失败")})}})}function f(a){{var b=this.options;this.params}return b.AliAppName||b.AliAppVersion||j.AntiFlood!==!0&&b.AntiFlood!==!0?void a():a().then(function(){var a=b.retJson,c=a.ret;c instanceof Array&&(c=c.join(",")),c.indexOf("FAIL_SYS_USER_VALIDATE")>-1&&a.data.url&&(location.href=a.data.url)})}function g(b){var c=this,e=this.options,f=this.params;return e.AliAppName||e.AliAppVersion||j.AntiCreep!==!0&&e.AntiCreep!==!0?void b():b().then(function(){var b=e.retJson,g=b.ret;return g instanceof Array&&(g=g.join(",")),g.indexOf("RGV587_ERROR::SM")>-1&&b.data.url?new h(function(e,g){function h(){k.removeEventListener("close",h),a.removeEventListener("message",i),g("USER_INPUT_CANCEL::用户取消输入")}function i(b){k.removeEventListener("close",h),a.removeEventListener("message",i),k.hide();var d;try{d=JSON.parse(b.data)||{}}catch(j){}if(d&&"child"===d.type){var l;try{l=JSON.parse(decodeURIComponent(d.content)),"string"==typeof l&&(l=JSON.parse(l));for(var m in l)f[m]=l[m];c.__sequence([c.__processToken,c.__processRequestUrl,c.__processUnitPrefix,c.middlewares,c.__processRequest]).then(e)}catch(j){g("USER_INPUT_FAILURE::用户输入失败")}}else e()}var j=b.data.url,k=new d("",j);k.addEventListener("close",i,!1),a.addEventListener("message",i,!1),k.show()}):void 0})}var h=a.Promise,i=b.mtop.CLASS,j=b.mtop.config,k=b.mtop.RESPONSE_TYPE;b.mtop.middlewares.push(e),b.mtop.loginRequest=function(a,b,c){var d={LoginRequest:!0,H5Request:!0,successCallback:b,failureCallback:c||b};return new i(a).request(d)},b.mtop.antiFloodRequest=function(a,b,c){var d={AntiFlood:!0,successCallback:b,failureCallback:c||b};return new i(a).request(d)},b.mtop.middlewares.push(f),b.mtop.antiCreepRequest=function(a,b,c){var d={AntiCreep:!0,successCallback:b,failureCallback:c||b};return new i(a).request(d)},b.mtop.middlewares.push(g)}(window,window.lib||(window.lib={}));!function(a,b,c){function d(a){var b=new RegExp("(?:^|;\\s*)"+a+"\\=([^;]+)(?:;\\s*|$)").exec(u.cookie);return b?b[1]:c}function e(a){return a.preventDefault(),!1}function f(b,c){var d=this,f=a.dpr||1,g=document.createElement("div"),h=document.documentElement.getBoundingClientRect(),i=Math.max(h.width,window.innerWidth)/f,j=Math.max(h.height,window.innerHeight)/f;g.style.cssText=["-webkit-transform:scale("+f+") translateZ(0)","-ms-transform:scale("+f+") translateZ(0)","transform:scale("+f+") translateZ(0)","-webkit-transform-origin:0 0","-ms-transform-origin:0 0","transform-origin:0 0","width:"+i+"px","height:"+j+"px","z-index:999999","position:absolute","left:0","top:0px","background:#FFF","display:none"].join(";");var k=document.createElement("div");k.style.cssText=["width:100%","height:52px","background:#EEE","line-height:52px","text-align:left","box-sizing:border-box","padding-left:20px","position:absolute","left:0","top:0","font-size:16px","font-weight:bold","color:#333"].join(";"),k.innerText=b;var l=document.createElement("a");l.style.cssText=["display:block","position:absolute","right:0","top:0","height:52px","line-height:52px","padding:0 20px","color:#999"].join(";"),l.innerText="关闭";var m=document.createElement("iframe");m.style.cssText=["width:100%","height:100%","border:0","overflow:hidden"].join(";"),k.appendChild(l),g.appendChild(k),g.appendChild(m),u.body.appendChild(g),m.src=c,l.addEventListener("click",function(){d.hide();var a=u.createEvent("HTMLEvents");a.initEvent("close",!1,!1),g.dispatchEvent(a)},!1),this.addEventListener=function(){g.addEventListener.apply(g,arguments)},this.removeEventListener=function(){g.removeEventListener.apply(g,arguments)},this.show=function(){document.addEventListener("touchmove",e,!1),g.style.display="block",window.scrollTo(0,0)},this.hide=function(){document.removeEventListener("touchmove",e),window.scrollTo(0,-h.top),u.body.removeChild(g)}}function g(a){if(!a||"function"!=typeof a||!b.mtop){var d=this.getUserNick();return!!d}b.mtop.request({api:"mtop.user.getUserSimple",v:"1.0",data:{isSec:0},H5Request:!0},function(d){d.retType===b.mtop.RESPONSE_TYPE.SUCCESS?a(!0,d):d.retType===b.mtop.RESPONSE_TYPE.SESSION_EXPIRED?a(!1,d):a(c,d)})}function h(a){var c;return b.promise&&(c=b.promise.defer()),this.isLogin(function(b,d){a&&a(b,d),b===!0?c&&c.resolve(d):c&&c.reject(d)}),c?c.promise:void 0}function i(a){if(!a||"function"!=typeof a){var b="",e=d("_w_tb_nick"),f=d("_nk_")||d("snk"),g=d("sn");return e&&e.length>0&&"null"!=e?b=decodeURIComponent(e):f&&f.length>0&&"null"!=f?b=unescape(unescape(f).replace(/\\u/g,"%u")):g&&g.length>0&&"null"!=g&&(b=decodeURIComponent(g)),b=b.replace(/\</g,"&lt;").replace(/\>/g,"&gt;")}this.isLogin(function(b,d){b===!0&&d&&d.data&&d.data.nick?a(d.data.nick):b===!1?a(""):a(c)})}function j(a){var c;return b.promise&&(c=b.promise.defer()),this.getUserNick(function(b){a&&a(b),b?c&&c.resolve(b):c&&c.reject()}),c?c.promise:void 0}function k(a,b){var c="//"+F+"."+G.subDomain+"."+D+"/"+G[(a||"login")+"Name"];if(b){var d=[];for(var e in b)d.push(e+"="+encodeURIComponent(b[e]));c+="?"+d.join("&")}return c}function l(a,b){if(b)location.replace(a);else{var c=u.createElement("a"),d=u.createEvent("HTMLEvents");c.style.display="none",c.href=a,u.body.appendChild(c),d.initEvent("click",!1,!0),c.dispatchEvent(d)}}function m(b,c,d){function e(){j.removeEventListener("close",e),a.removeEventListener("message",g),d("CANCEL")}function g(b){j.removeEventListener("close",e),a.removeEventListener("message",g),j.hide();var c=b.data||{};c&&"child"===c.type&&c.content.indexOf("SUCCESS")>-1?d("SUCCESS"):d("FAILURE")}var h=location.protocol+"//h5."+G.subDomain+".taobao.com/"+("waptest"===G.subDomain?"src":"other")+"/"+b+"end.html?origin="+encodeURIComponent(location.protocol+"//"+location.hostname),i=k(b,{ttid:"h5@iframe",tpl_redirect_url:h}),j=new f(c.title||"您需要登录才能继续访问",i);j.addEventListener("close",e,!1),a.addEventListener("message",g,!1),j.show()}function n(b,c,d){var e=k(b,{wvLoginCallback:"wvLoginCallback"});a.wvLoginCallback=function(b){delete a.wvLoginCallback,b.indexOf(":SUCCESS")>-1?d("SUCCESS"):b.indexOf(":CANCEL")>-1?d("CANCEL"):d("FAILURE")},l(e)}function o(a,b,c){if("function"==typeof b?(c=b,b=null):"string"==typeof b&&(b={redirectUrl:b}),b=b||{},c&&z)n(a,b,c);else if(c&&!y&&"login"===a)m(a,b,c);else{var d=k(a,{tpl_redirect_url:b.redirectUrl||location.href});l(d,b.replace)}}function p(a,c,d){var e;return b.promise&&(e=b.promise.defer()),o(a,c,function(a){d&&d(a),"SUCCESS"===a?e&&e.resolve(a):e&&e.reject(a)}),e?e.promise:void 0}function q(a){o("login",a)}function r(a){return p("login",a)}function s(a){o("logout",a)}function t(a){return p("logout",a)}var u=a.document,v=a.navigator.userAgent,w=location.hostname,x=(a.location.search,v.match(/WindVane[\/\s]([\d\.\_]+)/)),y=v.match(/AliApp\(([^\/]+)\/([\d\.\_]+)\)/i),z=!!(y&&"TB"===y[1]&&x&&parseFloat(x[1])>5.2),A=["taobao.net","taobao.com"],B=new RegExp("([^.]*?)\\.?((?:"+A.join(")|(?:").replace(/\./g,"\\.")+"))","i"),C=w.match(B)||[],D=function(){var a=C[2]||"taobao.com";return a.match(/\.?taobao\.net$/)?"taobao.net":"taobao.com"}(),E=function(){var a=D,b=C[1]||"m";return"taobao.net"===a&&(b="waptest"),b}(),F="login";b.login=b.login||{};var G={loginName:"login.htm",logoutName:"logout.htm",subDomain:E};b.login.config=G,b.login.isLogin=g,b.login.isLoginAsync=h,b.login.getUserNick=i,b.login.getUserNickAsync=j,b.login.generateUrl=k,b.login.goLogin=q,b.login.goLoginAsync=r,b.login.goLogout=s,b.login.goLogoutAsync=t}(window,window.lib||(window.lib={}));!function(win,undef){function compareVersion(a,b){a=a.toString().split("."),b=b.toString().split(".");for(var c=0;c<a.length||c<b.length;c++){var d=parseInt(a[c],10),e=parseInt(b[c],10);if(window.isNaN(d)&&(d=0),window.isNaN(e)&&(e=0),e>d)return-1;if(d>e)return 1}return 0}function callback(a,b){isAndroid&&compareVersion(osVersion,"2.4.0")<0?setTimeout(function(){a&&a(b.value||b)},1):a&&a(b.value||b)}var doc=win.document,ua=win.navigator.userAgent,isIOS=/iPhone|iPad|iPod/i.test(ua),isAndroid=/Android/i.test(ua),isWindVane=/WindVane/i.test(ua),osVersion=ua.match(/(?:OS|Android)[\/\s](\d+[._]\d+(?:[._]\d+)?)/i),wvVersion=ua.match(/WindVane[\/\s](\d+[._]\d+[._]\d+)/),hasOwnProperty=Object.prototype.hasOwnProperty,WindVane=win.WindVane||(win.WindVane={}),WindVane_Native=win.WindVane_Native,callbackMap={},inc=1,iframePool=[],iframeLimit=3,LOCAL_PROTOCOL="hybrid",WV_PROTOCOL="wv_hybrid",IFRAME_PREFIX="iframe_",SUCCESS_PREFIX="suc_",FAILURE_PREFIX="err_",PARAM_PREFIX="param_";osVersion=osVersion?(osVersion[1]||"0.0.0").replace(/\_/g,"."):"0.0.0",wvVersion=wvVersion?(wvVersion[1]||"0.0.0").replace(/\_/g,"."):"0.0.0";var WV_Core={call:function(a,b,c,d,e,f){var g;g=f>0?setTimeout(function(){WV_Core.onFailure(g,{ret:"TIMEOUT"})},f):WV_Private.getSid(),WV_Private.registerCall(g,d,e),isAndroid?compareVersion(wvVersion,"2.7.0")>=0?WV_Private.callMethodByPrompt(a,b,WV_Private.buildParam(c),g+""):WindVane_Native&&WindVane_Native.callMethod&&WindVane_Native.callMethod(a,b,WV_Private.buildParam(c),g+""):isIOS&&WV_Private.callMethodByIframe(a,b,WV_Private.buildParam(c),g+"")},fireEvent:function(a,b){var c=doc.createEvent("HTMLEvents");c.initEvent(a,!1,!0),c.param=WV_Private.parseParam(b),doc.dispatchEvent(c)},getParam:function(a){return WV_Private.params[PARAM_PREFIX+a]||""},onSuccess:function(a,b){clearTimeout(a);var c=WV_Private.unregisterCall(a).success,d=WV_Private.parseParam(b);callback(c,d),WV_Private.onComplete(a)},onFailure:function(a,b){clearTimeout(a);var c=WV_Private.unregisterCall(a).failure,d=WV_Private.parseParam(b);callback(c,d),WV_Private.onComplete(a)}},WV_Private={params:{},buildParam:function(a){return a&&"object"==typeof a?JSON.stringify(a):a||""},parseParam:function(str){if(str&&"string"==typeof str)try{obj=JSON.parse(str)}catch(e){obj=eval("("+str+")")}else obj=str||{};return obj},getSid:function(){return Math.floor(Math.random()*(1<<50))+""+inc++},registerCall:function(a,b,c){b&&(callbackMap[SUCCESS_PREFIX+a]=b),c&&(callbackMap[FAILURE_PREFIX+a]=c)},unregisterCall:function(a){var b=SUCCESS_PREFIX+a,c=FAILURE_PREFIX+a,d={success:callbackMap[b],failure:callbackMap[c]};return delete callbackMap[b],delete callbackMap[c],d},useIframe:function(a,b){var c=IFRAME_PREFIX+a,d=iframePool.pop();d||(d=doc.createElement("iframe"),d.setAttribute("frameborder","0"),d.style.cssText="width:0;height:0;border:0;display:none;"),d.setAttribute("id",c),d.setAttribute("src",b),d.parentNode||setTimeout(function(){doc.body.appendChild(d)},5)},retrieveIframe:function(a){var b=IFRAME_PREFIX+a,c=doc.querySelector("#"+b);iframePool.length>=iframeLimit?doc.body.removeChild(c):iframePool.push(c)},callMethodByIframe:function(a,b,c,d){var e=LOCAL_PROTOCOL+"://"+a+":"+d+"/"+b+"?"+c;this.params[PARAM_PREFIX+d]=c,this.useIframe(d,e)},callMethodByPrompt:function(a,b,c,d){var e=LOCAL_PROTOCOL+"://"+a+":"+d+"/"+b+"?"+c,f=WV_PROTOCOL+":";this.params[PARAM_PREFIX+d]=c,window.prompt(e,f)},onComplete:function(a){isIOS&&this.retrieveIframe(a),delete this.params[PARAM_PREFIX+a]}};for(var key in WV_Core)hasOwnProperty.call(WindVane,key)||(WindVane[key]=WV_Core[key])}(window);!function(a,b){function c(a){var b={};Object.defineProperty(this,"params",{set:function(a){if("object"==typeof a){for(var c in b)delete b[c];for(var c in a)b[c]=a[c]}},get:function(){return b},enumerable:!0}),Object.defineProperty(this,"search",{set:function(a){if("string"==typeof a){0===a.indexOf("?")&&(a=a.substr(1));var c=a.split("&");for(var d in b)delete b[d];for(var e=0;e<c.length;e++){var f=c[e].split("=");if(f[0])try{b[decodeURIComponent(f[0])]=decodeURIComponent(f[1]||"")}catch(g){b[f[0]]=f[1]||""}}}},get:function(){var a=[];for(var c in b)if(b[c])try{a.push(encodeURIComponent(c)+"="+encodeURIComponent(b[c]))}catch(d){a.push(c+"="+b[c])}else try{a.push(encodeURIComponent(c))}catch(d){a.push(c)}return a.length?"?"+a.join("&"):""},enumerable:!0});var c;Object.defineProperty(this,"hash",{set:function(a){a&&a.indexOf("#")<0&&(a="#"+a),c=a||""},get:function(){return c},enumerable:!0}),this.set=function(a){a=a||"";var b;if(!(b=a.match(new RegExp("^([a-z0-9-]+:)?[/]{2}(?:([^@/:?]+)(?::([^@/:]+))?@)?([^:/?#]+)(?:[:]([0-9]+))?([/][^?#;]*)?(?:[?]([^?#]*))?(#[^#]*)?$","i"))))throw new Error("Wrong uri scheme.");this.protocol=b[1]||location.protocol,this.username=b[2]||"",this.password=b[3]||"",this.hostname=this.host=b[4],this.port=b[5]||"",this.pathname=b[6]||"/",this.search=b[7]||"",this.hash=b[8]||"",this.origin=this.protocol+"//"+this.hostname},this.toString=function(){var a=this.protocol+"//";return this.username&&(a+=this.username,this.password&&(a+=":"+this.password),a+="@"),a+=this.host,this.port&&"80"!==this.port&&(a+=":"+this.port),this.pathname&&(a+=this.pathname),this.search&&(a+=this.search),this.hash&&(a+=this.hash),a},a&&this.set(a.toString())}b.httpurl=function(a){return new c(a)}}(window,window.lib||(window.lib={}));!function(a,b){function c(a){Object.defineProperty(this,"val",{value:a.toString(),enumerable:!0}),this.gt=function(a){return c.compare(this,a)>0},this.gte=function(a){return c.compare(this,a)>=0},this.lt=function(a){return c.compare(this,a)<0},this.lte=function(a){return c.compare(this,a)<=0},this.eq=function(a){return 0===c.compare(this,a)}}b.env=b.env||{},c.prototype.toString=function(){return this.val},c.prototype.valueOf=function(){for(var a=this.val.split("."),b=[],c=0;c<a.length;c++){var d=parseInt(a[c],10);isNaN(d)&&(d=0);var e=d.toString();e.length<5&&(e=Array(6-e.length).join("0")+e),b.push(e),1===b.length&&b.push(".")}return parseFloat(b.join(""))},c.compare=function(a,b){a=a.toString().split("."),b=b.toString().split(".");for(var c=0;c<a.length||c<b.length;c++){var d=parseInt(a[c],10),e=parseInt(b[c],10);if(window.isNaN(d)&&(d=0),window.isNaN(e)&&(e=0),e>d)return-1;if(d>e)return 1}return 0},b.version=function(a){return new c(a)}}(window,window.lib||(window.lib={})),function(a,b){b.env=b.env||{};var c=a.location.search.replace(/^\?/,"");if(b.env.params={},c)for(var d=c.split("&"),e=0;e<d.length;e++){d[e]=d[e].split("=");try{b.env.params[d[e][0]]=decodeURIComponent(d[e][1])}catch(f){b.env.params[d[e][0]]=d[e][1]}}}(window,window.lib||(window.lib={})),function(a,b){b.env=b.env||{};var c,d=a.navigator.userAgent;if(c=d.match(/Windows\sPhone\s(?:OS\s)?([\d\.]+)/))b.env.os={name:"Windows Phone",isWindowsPhone:!0,version:c[1]};else if(d.match(/Safari/)&&(c=d.match(/Android[\s\/]([\d\.]+)/)))b.env.os={version:c[1]},d.match(/Mobile\s+Safari/)?(b.env.os.name="Android",b.env.os.isAndroid=!0):(b.env.os.name="AndroidPad",b.env.os.isAndroidPad=!0);else if(c=d.match(/(iPhone|iPad|iPod)/)){var e=c[1];(c=d.match(/OS ([\d_\.]+) like Mac OS X/))&&(b.env.os={name:e,isIPhone:"iPhone"===e||"iPod"===e,isIPad:"iPad"===e,isIOS:!0,version:c[1].split("_").join(".")})}b.env.os||(b.env.os={name:"unknown",version:"0.0.0"}),b.version&&(b.env.os.version=b.version(b.env.os.version))}(window,window.lib||(window.lib={})),function(a,b){b.env=b.env||{};var c,d=a.navigator.userAgent;(c=d.match(/(?:UCWEB|UCBrowser\/)([\d\.]+)/))?b.env.browser={name:"UC",isUC:!0,version:c[1]}:(c=d.match(/MQQBrowser\/([\d\.]+)/))?b.env.browser={name:"QQ",isQQ:!0,version:c[1]}:(c=d.match(/(?:Firefox|FxiOS)\/([\d\.]+)/))?b.env.browser={name:"Firefox",isFirefox:!0,version:c[1]}:(c=d.match(/MSIE\s([\d\.]+)/))||(c=d.match(/IEMobile\/([\d\.]+)/))?(b.env.browser={version:c[1]},d.match(/IEMobile/)?(b.env.browser.name="IEMobile",b.env.browser.isIEMobile=!0):(b.env.browser.name="IE",b.env.browser.isIE=!0),d.match(/Android|iPhone/)&&(b.env.browser.isIELikeWebkit=!0)):(c=d.match(/(?:Chrome|CriOS)\/([\d\.]+)/))?(b.env.browser={name:"Chrome",isChrome:!0,version:c[1]},d.match(/Version\/[\d+\.]+\s*Chrome/)&&(b.env.browser.name="Chrome Webview",b.env.browser.isWebview=!0)):d.match(/Safari/)&&(c=d.match(/Android[\s\/]([\d\.]+)/))?b.env.browser={name:"Android",isAndroid:!0,version:c[1]}:d.match(/iPhone|iPad|iPod/)&&(d.match(/Safari/)&&(c=d.match(/Version\/([\d\.]+)/))?b.env.browser={name:"Safari",isSafari:!0,version:c[1]}:(c=d.match(/OS ([\d_\.]+) like Mac OS X/))&&(b.env.browser={name:"iOS Webview",isWebview:!0,version:c[1].replace(/\_/g,".")})),b.env.browser||(b.env.browser={name:"unknown",version:"0.0.0"}),b.version&&(b.env.browser.version=b.version(b.env.browser.version))}(window,window.lib||(window.lib={})),function(a,b){b.env=b.env||{};var c=a.navigator.userAgent;b.env.thirdapp=c.match(/Weibo/i)?{appname:"Weibo",isWeibo:!0}:c.match(/MicroMessenger/i)?{appname:"Weixin",isWeixin:!0}:!1}(window,window.lib||(window.lib={})),function(a,b){b.env=b.env||{};var c,d,e=a.navigator.userAgent;(d=e.match(/WindVane[\/\s]([\d\.\_]+)/))&&(c=d[1]);var f=!1,g="",h="",i="",j=a._ua_popLayer||"",k=!1,l="";(d=e.match(/AliApp\(([A-Z\-]+)\/([\d\.]+)\)/i))&&(f=!0,g=d[1],i=d[2],h=g.indexOf("-PD")>0?b.env.os.isIOS?"iPad":b.env.os.isAndroid?"AndroidPad":b.env.os.name:b.env.os.name),!g&&e.indexOf("TBIOS")>0&&(g="TB"),j&&(d=j.match(/PopLayer\/([\d\.]+)/i))&&(k=!0,l=d[1]),b.env.aliapp=f?{windvane:b.version(c||"0.0.0"),appname:g||"unkown",version:b.version(i||"0.0.0"),platform:h||b.env.os.name,poplayer:k||!1,poplayerVersion:b.version(l||"0.0.0")}:!1,b.env.taobaoApp=b.env.aliapp}(window,window.lib||(window.lib={}));!function(a,b){"function"==typeof define?define(b):"undefined"!=typeof module?module.exports=b():(this.lib=this.lib||{},this.lib[a]=b())}("img",function(){function a(a){var b={size:"200x200",sharpen:"",q:["q50","q30"],isNeedWebp:!0};this.opts=b=f.extend(b,a),b.q=f.network?"wifi"==f.network?b.q[0]:b.q[1]:b.q[0]}var b=(window.document,null!=navigator.userAgent.match(/(iPhone\sOS)\s([\d_]+)/i)),c=(b&&3==window.devicePixelRatio,/^http:\/\/(.+\.(?:alicdn|taobaocdn|taobao)\.(?:com|net))(\/.*(?:\.(jpg|png|gif|jpeg|webp)))$/i),d=/_(\d+x\d+|cy\d+i\d+|sum|m|b)?(xz|xc)?(q\d+)?(s\d+)?(\.jpg)?(_\.webp)?$/i,e=[16,20,24,30,32,36,40,48,50,60,64,70,72,80,88,90,100,110,120,125,128,145,180,190,200,200,210,220,230,240,250,270,300,310,315,320,336,360,468,490,540,560,580,600,640,720,728,760,970],f={getNetWork:function(){var a=this,b=null!=navigator.userAgent.match(/WindVane/i);b&&window.WindVane&&WindVane.call("TBDeviceInfo","getInfo",{},function(b){b&&b.network&&(a.network=b.network)},function(){})},detectWebp:function(){var a=this,b=new Image;b.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA",b.onload=function(){a.isWebp=2===b.height?!0:!1},b.onerror=function(){a.isWebp=!1}},extend:function(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}};return f.getNetWork(),f.detectWebp(),a.prototype={constructor:a,getNewUrl:function(a){var b=this;if("string"!=typeof a)return"";var e=a.match(c);if(null!=e){var g;g=-1!=e[1].indexOf("daily")?"http://"+e[1]+e[2]:"http://gw.alicdn.com"+e[2];var h=g.match(d),i=b.bestSize||this.getBestCdnSize(this.opts.size),j="_"+i+this.opts.q+this.opts.sharpen+".jpg";return f.isWebp&&this.opts.isNeedWebp&&(j+="_.webp"),h?g=g.replace(d,j):g+j}return a},getBestCdnSize:function(a){var c=this;a=parseInt(a.split("x")[0]),b&&(a=a*window.devicePixelRatio/2);var d=0,f=e[e.length-1];if(a>=f)return c.bestSize=f+"x"+f,f+"x"+f;for(var g=e.length;g>=0;g--)if(e[g]<=a){e[g]==a?d=a:g<e.length-1&&(d=e[g+1]);break}return c.bestSize=d+"x"+d,d+"x"+d}},a});!function(a,b){function c(a,b){var c=new j(location.href),d=h.getElementById("buried"),e=c.params.ttid,f=c.params.ad_id,g=c.params.source_type,i=c.params.refpid,k=c.params.actparam,l=c.params.actname,m=c.params.ali_trackid,n=c.params.pid,o=h.cookie.match(/(?:^|\s)cna=([^;]+)(?:;|$)/);c.search="",c.hash="";var p={};if(d&&(e=d.value),p.from="h5",e&&(p.ttid=e),i&&(p.refpid=i),k&&(p.actparam=k),l&&(p.actname=l),p.url=c.toString(),n&&(p.pid=n),f&&(p.ad_id=f),g&&(p.source_type=g),m&&(p.ali_trackid=m),o&&(p.h5_uid=o[1]),"object"==typeof b)for(var q in b)p[q]=b[q];return a.params.point=JSON.stringify(p),a}function d(a,b){var c=new j(location.href),d=h.getElementById("buried");for(var e in c.params)a.params.hasOwnProperty(e)||(a.params[e]=c.params[e]);if(d&&(a.params.ttid=d.value),"object"==typeof b)for(var e in b)a.params[e]=b[e];return a}function e(a){o||(o=h.createElement("iframe"),o.id="callapp_iframe_"+Date.now(),o.frameborder="0",o.style.cssText="display:none;border:0;width:0;height:0;",h.body.appendChild(o)),o.src=a}function f(a,b){b.replace===!1||!l&&b.replace!==!0?location.href=a:location.replace(a)}function g(a){var b=document.createElement("a");b.setAttribute("href",a),b.style.display="none",document.body.appendChild(b);var c=document.createEvent("HTMLEvents");c.initEvent("click",!1,!1),b.dispatchEvent(c)}var h=a.document,i=a.navigator.userAgent,j=b.httpurl,k=b.env.os,l=(b.env.params,b.env.aliapp),m=b.env.browser,n={"taobao:":"com.taobao.taobao","taobaowebview:":"com.taobao.taobao","tmall:":"com.tmall.wireless"};b.callapp=b.callapp||{};var o;b.callapp.gotoPage=function(a,b){b=b||{},"undefined"==typeof b.point&&(b.point=!0),"undefined"==typeof b.params&&(b.params=!0);var h=new j(a||location.href);if(a=new j(a),("http:"===a.protocol||"https:"===a.protocol)&&(k.isAndroid&&l&&"TB"===l.appname?(a=new j("taobaowebview://m.taobao.com/"),a.params.weburl=h.toString()):a.protocol="taobao:"),"taobao:"===a.protocol)b.point&&c(a,b.point),b.params&&d(a,b.params);else if("taobaowebview:"===a.protocol){b.point&&c(a,b.point);var o=new j(a.params.weburl);b.params&&d(o,b.params),b.point&&c(o,b.point),a.params.weburl=o.toString()}else"tmall:"!==a.protocol.toLowerCase()&&"kddcpublic:"!==a.protocol.toLowerCase()&&"mdatadwphone:"!==a.protocol.toLowerCase()&&b.params&&d(a,b.params);var p=k.isAndroid&&m.isChrome&&!m.isWebview,q=k.isAndroid&&!!i.match(/samsung/i)&&k.version.gte("4.3")&&k.version.lt("4.5"),r=k.isIPhone&&k.version.gte("9.0")&&m.isSafari;(p||q||b.forceIntent)&&(a.hash="Intent;scheme="+a.protocol.replace(":","")+";package="+(b["package"]||n[a.protocol])+";end",a.protocol="intent:"),r?setTimeout(function(){g(a.toString(),b)},100):l||"intent:"===a.protocol?setTimeout(function(){f(a.toString(),b)},100):e(a.toString())},b.callapp.download=function(a,b){b=b||{},a||(a=k.isIPhone?"http://itunes.apple.com/cn/app/id387682726?mt=8":k.isIPad?"https://itunes.apple.com/app/id438865278":k.isAndroid?"//download.alicdn.com/wireless/taobao4android/latest/taobao4android_703248.apk":""),a=new j(a),k.isAndroid&&a.pathname.match(/\.apk$/)?(a.search="",a.hash=""):b.params&&d(a,b.params),a=a.toString(),f(a,b)}}(window,window.lib||(window.lib={}));(function(win,lib){var host=win.location.hostname,hostReg=/.*?([^.]+)(?:\.x)?\.(taobao|tmall|etao|alibaba|alipay|aliyun)\.(com|net).*/i,_host=win.location.hostname.match(hostReg),sysType=host.match(/taobao\.net$/i)?"waptest":"m";if(_host&&(_host[1]==="waptest"||_host[1]==="wapa"||_host[1]==="m")){sysType=_host[1]}lib.config={hostReg:hostReg,sysType:sysType,defaultAppKey:sysType==="waptest"?"4272":"12574478"}})(window,window.lib||(window.lib={}));(function(win,lib){var uri={},config=lib.config,http_env={protocol:win.location.protocol+"//",sysType:config.sysType,defaultDomain:"taobao.com"},docede=function(str){try{return decodeURIComponent(str)}catch(e){return str}},getParam=uri.getParam=function(paramKey){var queryString=this.queryMap||function(paramStr){if(paramStr.length<1){return""}paramStr=paramStr.substr(1);var params=paramStr.split("&"),queryString={},aparam,i;for(i in params){aparam=params[i].split("=");queryString[docede(aparam[0])]=docede(aparam[1])}return queryString}(location.search),value;this.queryMap=queryString;if(paramKey){value=queryString[paramKey];if(value&&value.indexOf("#")>-1){value=encodeURIComponent(value)}return value}else{return queryString}},ttQueryStr=function(_appendParams){var result="",i,key,value;for(i in _appendParams){key=_appendParams[i];value=getParam(key);if(value&&value!==""){result+="&"+key+"="+value}}return result}(["ttid","sprefer"]);uri.getUrl=function(param){function __append(dist,append){if(!append){return dist}if(dist.indexOf("?")<0){dist+="?"}var last=dist.charAt(dist.length-1),first=append.charAt(0);if("?"===last||"&"===last){if("?"===first||"&"===first){return dist+append.substr(1)}else{return dist+append}}else{if("?"===first||"&"===first){return dist+append}else{return dist+"&"+append}}}var url=param.url||function(http_env){var host=param.host||param.subdomain+"."+http_env.sysType+"."+http_env.defaultDomain;return http_env.protocol+host+"/"+param.path}(http_env);url.indexOf("?")>0||(url+="?");url=__append(url,ttQueryStr);if(param.data){url=__append(url,function(j){var s="",k,v;if(null==j){return s}for(k in j){v=j[k];if(null!=v&&""!==v){s+=k+"="+encodeURIComponent("object"===typeof v?JSON.stringify(v):v)+"&"}}if(""!==s&&s.length-1===s.lastIndexOf("&")){s=s.substr(0,s.length-1)}return s}(param.data))}return url};lib.uri=uri})(window,window.lib||(window.lib={}));!function(a,b,c){function d(a){return null!=a&&"object"==typeof a&&Object.getPrototypeOf(a)==Object.prototype}function e(a,b){var c,d,e,f=null,g=0,h=function(){g=Date.now(),f=null,e=a.apply(c,d)};return function(){var i=Date.now(),j=b-(i-g);return c=this,d=arguments,0>=j?(clearTimeout(f),f=null,g=i,e=a.apply(c,d)):f||(f=setTimeout(h,j)),e}}function f(a){var b="";return Object.keys(a).forEach(function(c){b+=c+":"+a[c]+";"}),b}function g(a,c){!c&&d(a)&&(c=a,a=c.element),c=c||{},a.nodeType!=b.ELEMENT_NODE&&"string"==typeof a&&(a=b.querySelector(a));var e=this;e.element=a,e.top=c.top||0,e.withinParent=void 0==c.withinParent?!1:c.withinParent,e.init()}var h=a.parseInt,i=navigator.userAgent,j=!!i.match(/Firefox/i),k=!!i.match(/IEMobile/i),l=j?"-moz-":k?"-ms-":"-webkit-",m=j?"Moz":k?"ms":"webkit",n=function(){var a=b.createElement("div"),c=a.style;return c.cssText="position:"+l+"sticky;position:sticky;",-1!=c.position.indexOf("sticky")}();g.prototype={constructor:g,init:function(){var a=this,b=a.element,c=b.style;c[m+"Transform"]="translateZ(0)",c.transform="translateZ(0)",a._originCssText=c.cssText,n?(c.position=l+"sticky",c.position="sticky",c.top=a.top+"px"):(a._simulateSticky(),a._bindResize())},_bindResize:function(){var b=this,c=/android/gi.test(navigator.appVersion),d=b._resizeEvent="onorientationchange"in a?"orientationchange":"resize",e=b._resizeHandler=function(){setTimeout(function(){b.refresh()},c?200:0)};a.addEventListener(d,e,!1)},refresh:function(){var a=this;n||(a._detach(),a._simulateSticky())},_addPlaceholder:function(a){var c,d=this,e=d.element,g=a.position;if(-1!=["static","relative"].indexOf(g)){c=d._placeholderElement=b.createElement("div");var i=h(a.width)+h(a.marginLeft)+h(a.marginRight),j=h(a.height);"border-box"!=a.boxSizing&&(i+=h(a.borderLeftWidth)+h(a.borderRightWidth)+h(a.paddingLeft)+h(a.paddingRight),j+=h(a.borderTopWidth)+h(a.borderBottomWidth)+h(a.paddingTop)+h(a.paddingBottom)),c.style.cssText=f({display:"none",visibility:"hidden",width:i+"px",height:j+"px",margin:0,"margin-top":a.marginTop,"margin-bottom":a.marginBottom,border:0,padding:0,"float":a["float"]||a.cssFloat}),e.parentNode.insertBefore(c,e)}return c},_simulateSticky:function(){var c=this,d=c.element,g=c.top,i=d.style,j=d.getBoundingClientRect(),k=getComputedStyle(d,""),l=d.parentNode,m=getComputedStyle(l,""),n=c._addPlaceholder(k),o=c.withinParent,p=c._originCssText,q=j.top-g+a.pageYOffset,r=l.getBoundingClientRect().bottom-h(m.paddingBottom)-h(m.borderBottomWidth)-h(k.marginBottom)-j.height-g+a.pageYOffset,s=p+f({position:"fixed",top:g+"px",width:k.width,"margin-top":0}),t=p+f({position:"absolute",top:r+"px",width:k.width}),u=1,v=c._scrollHandler=e(function(){var b=a.pageYOffset;q>b?1!=u&&(i.cssText=p,n&&(n.style.display="none"),u=1):!o&&b>=q||o&&b>=q&&r>b?2!=u&&(i.cssText=s,n&&3!=u&&(n.style.display="block"),u=2):o&&3!=u&&(i.cssText=t,n&&2!=u&&(n.style.display="block"),u=3)},100);if(a.addEventListener("scroll",v,!1),a.pageYOffset>=q){var w=b.createEvent("HTMLEvents");w.initEvent("scroll",!0,!0),a.dispatchEvent(w)}},_detach:function(){var b=this,c=b.element;if(c.style.cssText=b._originCssText,!n){var d=b._placeholderElement;d&&c.parentNode.removeChild(d),a.removeEventListener("scroll",b._scrollHandler,!1)}},destroy:function(){var b=this;b._detach();var c=b.element.style;c.removeProperty(l+"transform"),c.removeProperty("transform"),n||a.removeEventListener(b._resizeEvent,b._resizeHandler,!1)}},c.sticky=g}(window,document,window.lib||(window.lib={}));